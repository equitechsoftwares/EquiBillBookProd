
<div class="modal fade" id="shipping">
    <div class="modal-dialog  modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Shipping Details</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="">
                            <label for="payment_note_1">Shipping Details</label>
                            <textarea type="text" class="form-control" id="txtShippingDetails" name="payment_note_1" placeholder=""></textarea>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="">
                            <label for="payment_note_1">Shipping Address</label>
                            <textarea type="text" class="form-control" id="txtShippingAddress" name="payment_note_1" placeholder=""></textarea>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="">
                            <label for="payment_note_1">Shipping Status</label>
                            <select class="form-control" style="width: 100%;" id="ddlShippingStatus">
                                <option selected="selected">Ordered</option>
                                <option>Packed</option>
                                <option>Shipped</option>
                                <option>Delivered</option>
                                <option>Cancelled</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="">
                            <label for="payment_note_1">Delivered To</label>
                            <input type="text" class="form-control" id="txtDeliveredTo" placeholder="">
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="paymentTermModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Payment Term</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Term Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divPaymentTerm_M_ctrl" id="txtPaymentTerm_M" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divPaymentTerm_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Days <span class="danger">*</span></label>
                            <input type="text" class="form-control divDays_M_ctrl" id="txtDays_M" placeholder="" onkeypress="return onlyNumberKey(event)">
                            <small class="text-red font-weight-bold errorText" id="divDays_M"></small>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertPaymentTerm()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="cityModal">
    <div class="modal-dialog modal-l">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add City</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>City Code <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                                <input type="text" class="form-control" id="txtCityCode" placeholder="">
                                <small class="text-red font-weight-bold errorText" id="divCityCode_M"></small>
                            </div>
                        </div>*@
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Country <span class="danger">*</span></label>
                                <div class="input-group">
                                    <select class="form-control select2" style="width: 100%;" id="ddlCityModalCountry" onchange="fetchCityModalActiveStates()">
                                        <option value="0">Select</option>
                                        @foreach (var item in ViewBag.Countrys)
                                        {
                                            <option value="@item.CountryId">@item.Country</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>*@
                    @*<div class="col-sm-6" id="p_CityModalStates_Dropdown">
                            <label>State <span class="danger">*</span></label>
                            <select class="form-control select2" id="ddlCityModalState" style="width: 100%;">
                            </select>
                        </div>*@
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>City Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divCity_M_ctrl" id="txtCity" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divCity_M"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertCity()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="invoiceModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Print Invoice</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="height:75vh">
                <iframe id="lblInvoice" style="border:0;width:100%;height:100%"></iframe>
            </div>
            @*<div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Ok</button>
                </div>*@
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="stockAlertModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Alert!!</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12" id="divStockAlertMsg">

                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="confirmStockAlertInsert()">Continue</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="PaymentMethodModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Payment Method</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Payment Method Name <span class="danger">*</span></label>
                            <input type="text" class="form-control" id="txtPaymentType_M" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divPaymentType_M"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertPaymentMethod()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="faqModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">FAQs</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="p-0 pl-2 pr-2">
                            <div class="card collapsed-card" data-card-widget="collapse" title="Collapse">
                                <div class="card-header" data-card-widget="collapse" title="Collapse">
                                    <h3 class="card-title">What is product purchase?</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" style="display: none;">
                                    Your purchasing decision may be influenced by the manner in which you can purchase and receive the product. For example, you may purchase a product through a particular store because the product can be financed, is available immediately, or can be delivered quickly.
                                </div>
                            </div>
                            <div class="card collapsed-card" data-card-widget="collapse" title="Collapse">
                                <div class="card-header" data-card-widget="collapse" title="Collapse">
                                    <h3 class="card-title">How do businesses manage purchase order?</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" style="display: none;">
                                    When the order is placed with the suppliers for the supply of goods, the items, quantities, date of receipt, and so on, details are given with the purchase order number. Later, when these goods are received, the purchase order is tracked for the order details either in the receipt note or in the purchase invoice. Next, the purchase invoice is tracked with the payment that is made to the vendor.
                                </div>
                            </div>
                            <div class="card collapsed-card" data-card-widget="collapse" title="Collapse">
                                <div class="card-header" data-card-widget="collapse" title="Collapse">
                                    <h3 class="card-title">Purchase order vs purchase invoice</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" style="display: none;">
                                    The following table highlights the key difference between purchase order and purchase invoice
                                    <table>
                                        <tr>
                                            <td>
                                                Purchase order
                                            </td>
                                            <td>
                                                Invoice
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Purchase order is a contract or confirmation of that the order for such a material is placed
                                            </td>
                                            <td>
                                                Purchase invoice is a bill issued after fulling the delivery and request for the payment
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Buyer initiates and sends to the supplier
                                            </td>
                                            <td>
                                                Purchase invoice is a bill issued after fulling the delivery and request for the payment
                                                Supplier initiates and sends it to the buyer
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                It is issued before receiving the goods
                                            </td>
                                            <td>
                                                It is issued after or along with the delivery of goods by the supplier
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="ItemModal">
    <div class="modal-dialog modal-dialog-scrollable modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Item</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- left column -->
                    <div class="col-md-12">
                        <!-- jquery validation -->
                        <div class="card card-primary card-outline">
                            <!-- item info -->
                            @*<div class="card-header">
                                    <h3 class="card-title">Item Info</h3>
                                </div>*@
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <div class="form-group">
                                            <label>Item Type</label>
                                            <div class="input-group">
                                                <select class="form-control" style="width: 100%;" id="ddlItemType" onchange="fetchItemCodes()">
                                                    <option value="Product">Product</option>
                                                    @*<option value="Service">Service</option>*@
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3" style="display:@((ViewBag.ItemSetting.EnableProductVariation== false&& ViewBag.ItemSetting.EnableComboProduct== false)?"none":"block")">
                                        <!-- text input -->
                                        <div class="form-group divProductType_ctrl">
                                            <label>Product Type <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="<b>Single product</b>: Product with no variations.<br><b>Variable product</b>: Product with variations such as size, color etc.<br><b>Combo product</b>: A combination of multiple products, also called bundle product"></i></label>
                                            <select class="form-control" style="width: 100%;" id="ddlProductType" onchange="chooseProductType()">
                                                <option selected="selected" value="Single">Single</option>
                                                @if (ViewBag.ItemSetting.EnableProductVariation == true)
                                                {
                                                    <option value="Variable">Variable</option>
                                                }
                                                @*@if (ViewBag.ItemSetting.EnableComboProduct == true)
                                                {
                                                    <option value="Combo">Combo</option>
                                                }*@
                                            </select>
                                            <small class="text-red font-weight-bold errorText" id="divProductType"></small>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <!-- text input -->
                                        <div class="form-group">
                                            @*<label id="lblSkuCode">SKU/ Barcode <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>*@
                                            <label>SKU/ Barcode <span class="danger">*</span></label>
                                            <input type="text" class="form-control divSkuCode_ctrl" id="txtSkuCode" placeholder="">
                                            <small class="text-red font-weight-bold errorText" id="divSkuCode"></small>
                                        </div>
                                    </div>
                                    @if (ViewBag.BusinessSetting.CountryId == 2)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                            <div class="form-group">
                                                <label id="lblHsnCode">Hsn Code </label>
                                                <div class="input-group" id="p_HsnSac_Dropdown">
                                                    <select class="form-control select2" id="ddlItemCode" onchange="fetchItemCodeTax()">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.ItemCodes)
                                                        {
                                                            <option value="@item.ItemCodeId">@item.Code</option>
                                                        }
                                                    </select>
                                                    @if (ViewBag.ItemCodePermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openItemCodeModal()">+ </a>
                                                        </span>
                                                    }
                                                </div>
                                            </div>

                                        </div>
                                        @*<div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3" id="p_ItemCodes_Dropdown">
                @Html.Partial("PartialItemCodesDropdown")
            </div>*@
                                    }
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label id="lblProductName">Product Name <span class="danger">*</span></label>
                                            <input type="text" class="form-control divItemName_ctrl" id="txtItemName" placeholder="">
                                            <small class="text-red font-weight-bold errorText" id="divItemName"></small>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <div class="form-group">
                                            <label>Unit <span class="danger service">*</span></label>
                                            <div class="input-group divUnit_ctrl">
                                                <select class="form-control select2 divUnit_ctrl" id="ddlUnit" onchange="fetchActiveSecondaryUnits()">
                                                    <option value="0">Select</option>
                                                    @foreach (var item in ViewBag.Units)
                                                    {
                                                        if (ViewBag.ItemSetting.DefaultUnitId == item.UnitId)
                                                        {
                                                            <option value="@item.UnitId" selected>@item.UnitShortName</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@item.UnitId">@item.UnitShortName</option>
                                                        }
                                                    }
                                                </select>
                                                @if (ViewBag.UnitsPermission.IsAdd == true)
                                                {
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#unitModal">+ </a>
                                                    </span>
                                                }
                                            </div>
                                            <small class="text-red font-weight-bold errorText" id="divUnit"></small>
                                        </div>
                                    </div>
                                    @if (ViewBag.ItemSetting.EnableSecondaryUnit == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service divChkSecondaryUnit">
                                            <br />
                                            <div class="form-group">
                                                <div class="checkbox icheck-turquoise">
                                                    <input type="checkbox" id="chkEnableSecondaryUnit" onchange="fetchActiveSecondaryUnits()" />
                                                    <label for="chkEnableSecondaryUnit" class="mt-2">Enable Secondary Unit</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divSecondaryUnit hidden service">
                                            <div class="form-group">
                                                <label>Secondary Unit <span class="danger">*</span></label>
                                                <div class="input-group">
                                                    <select class="form-control select2" id="ddlSecondaryUnit" onchange="fetchActiveTertiaryUnits()">
                                                        <option value="0">Select</option>
                                                        @{
                                                            if (ViewBag.SecondaryUnits != null)
                                                            {
                                                                foreach (var item in ViewBag.SecondaryUnits)
                                                                {
                                                                    <option value="@item.SecondaryUnitId">@item.SecondaryUnitShortName</option>
                                                                }
                                                            }
                                                        }
                                                    </select>
                                                    @if (ViewBag.SecondaryUnitsPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openSecondaryUnitModal()">+ </a>
                                                        </span>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divSecondaryUnit hidden service">
                                            <div class="form-group">
                                                <label><br /></label>
                                                <div class="input-group">
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn bg-gray txtUnit">1 Pet = </a>
                                                    </span>
                                                    <input type="number" class="form-control" id="txtUToSValue" placeholder="Conversion Rate"
                                                           onkeypress="return onlyDecimalKey(event)">
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn bg-gray txtSecondaryUnit">Unit 2 </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    }

                                    @if (ViewBag.ItemSetting.EnableTertiaryUnit == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divSecondaryUnit hidden service">
                                            <br />
                                            <div class="form-group">
                                                <div class="checkbox icheck-turquoise">
                                                    <input type="checkbox" id="chkEnableTertiaryUnit" onchange="fetchActiveTertiaryUnits()" />
                                                    <label for="chkEnableTertiaryUnit" class="mt-2">Enable Tertiary Unit</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTertiaryUnit hidden service">
                                            <div class="form-group">
                                                <label>Tertiary Unit <span class="danger">*</span></label>
                                                <div class="input-group">
                                                    <select class="form-control select2" id="ddlTertiaryUnit" onchange="fetchActiveQuaternaryUnits()">
                                                        <option value="0">Select</option>
                                                        @{
                                                            if (ViewBag.TertiaryUnits != null)
                                                            {
                                                                foreach (var item in ViewBag.TertiaryUnits)
                                                                {
                                                                    <option value="@item.TertiaryUnitId">@item.TertiaryUnitShortName</option>
                                                                }
                                                            }
                                                        }
                                                    </select>
                                                    @if (ViewBag.TertiaryUnitsPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openTertiaryUnitModal()">+ </a>
                                                        </span>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTertiaryUnit hidden service">
                                            <div class="form-group">
                                                <label><br /></label>
                                                <div class="input-group">
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn bg-gray txtSecondaryUnit_">1 Pet = </a>
                                                    </span>
                                                    <input type="number" class="form-control" id="txtSToTValue" placeholder="Conversion Rate"
                                                           onkeypress="return onlyDecimalKey(event)">
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn bg-gray txtTertiaryUnit">Unit 2 </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    @if (ViewBag.ItemSetting.EnableQuaternaryUnit == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTertiaryUnit hidden service">
                                            <br />
                                            <div class="form-group">
                                                <div class="checkbox icheck-turquoise">
                                                    <input type="checkbox" id="chkEnableQuaternaryUnit" onchange="fetchActiveQuaternaryUnits()" />
                                                    <label for="chkEnableQuaternaryUnit" class="mt-2">Enable Quaternary Unit</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divQuaternaryUnit hidden service">
                                            <div class="form-group">
                                                <label>Quaternary Unit <span class="danger">*</span></label>
                                                <div class="input-group">
                                                    <select class="form-control select2" id="ddlQuaternaryUnit" onchange="toggleQuaternaryUnit()">
                                                        <option value="0">Select</option>
                                                        @{
                                                            if (ViewBag.QuaternaryUnits != null)
                                                            {
                                                                foreach (var item in ViewBag.QuaternaryUnits)
                                                                {
                                                                    <option value="@item.QuaternaryUnitId">@item.QuaternaryUnitShortName</option>
                                                                }
                                                            }
                                                        }

                                                    </select>
                                                    @if (ViewBag.QuaternaryUnitsPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openQuaternaryUnitModal()">+ </a>
                                                        </span>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divQuaternaryUnit hidden service">
                                            <div class="form-group">
                                                <label><br /></label>
                                                <div class="input-group">
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn bg-gray txtTertiaryUnit_">1 Pet = </a>
                                                    </span>
                                                    <input type="number" class="form-control" id="txtTToQValue" placeholder="Conversion Rate"
                                                           onkeypress="return onlyDecimalKey(event)">
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn bg-gray txtQuaternaryUnit" data-toggle="modal" data-target="#categoryModal" id="txtUnit2">Unit 2 </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <!--<div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service">-->
                                    <!-- text input -->
                                    <!--<div class="form-group">
            <label>Select Barcode Type <span class="danger">*</span></label>
            <div class="input-group">
                <select class="form-control" style="width: 100%;" id="ddlBarcodeType">
                    <option value="ean8">EAN 8</option>
                    <option value="ean13">EAN 13</option>
                    <option value="upc">UPC</option>
                    <option value="std25">standard 2 of 5 (industrial)</option>
                    <option value="int25">interleaved 2 of 5</option>
                    <option value="code11">code 11</option>
                    <option value="code39">Code 39</option>
                    <option value="code93">code 93</option>
                    <option value="code128">code 128</option>
                    <option value="codabar">codabar</option>
                    <option value="msi">MSI</option>
                    <option value="datamatrix">Data Matrix</option>
                </select>
            </div>
        </div>
    </div>-->
                                    @if (ViewBag.ItemSetting.EnableBrands == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service">
                                            <div class="form-group">
                                                <label>Brand</label>
                                                <div class="input-group">
                                                    <select class="form-control select2" id="ddlBrand">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.Brands)
                                                        {
                                                            <option value="@item.BrandId">@item.Brand</option>
                                                        }
                                                    </select>
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#brandModal">+ </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <div class="form-group">
                                            <label>Category <span class="danger">*</span></label>
                                            <div class="input-group divCategory_ctrl">
                                                <select class="form-control select2" id="ddlCategory" onchange="fetchActiveSubCategories()">
                                                    <option value="0">Select</option>
                                                    @foreach (var item in ViewBag.Categories)
                                                    {
                                                        <option value="@item.CategoryId">@item.Category</option>
                                                    }
                                                </select>
                                                @if (ViewBag.CategoriesPermission.IsAdd == true)
                                                {
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#categoryModal">+ </a>
                                                    </span>
                                                }

                                            </div>
                                            <small class="text-red font-weight-bold errorText" id="divCategory"></small>
                                        </div>
                                    </div>
                                    @if (ViewBag.ItemSetting.EnableSubCategory == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3" id="p_SubCategories_Dropdown">
                                            @Html.Partial("PartialSubCategoryDropdown")
                                        </div>
                                    }
                                    @if (ViewBag.ItemSetting.EnableSubSubCategory == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3" id="p_SubSubCategories_Dropdown">
                                            @Html.Partial("PartialSubSubCategoryDropdown")
                                        </div>
                                    }
                                    @*@if (ViewBag.Branchs.Count > 1)
        {
            <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                <div class="form-group">
                    <label>Business Location <span class="danger">*</span></label>
                    <select class="select2" multiple="multiple" data-placeholder="Select a State" style="width: 100%;" id="ddlBranch">
                        <option value="0">Select</option>
                        @foreach (var item in ViewBag.Branchs)
                        {
                            <option value="@item.BranchId">@item.Branch</option>
                        }
                    </select>
                </div>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 hidden">
                <div class="form-group">
                    <label>Business Location <span class="danger">*</span></label>
                    <select class="select2" data-placeholder="Select a State" style="width: 100%;" id="ddlBranch">
                        @foreach (var item in ViewBag.Branchs)
                        {
                            <option value="@item.BranchId">@item.Branch</option>
                        }
                    </select>
                </div>
            </div>
        }*@

                                    @*<div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
            <div class="form-group">
                <label id="lblProductBrochure">Product Brochure</label>
                <div class="custom-file">
                    <input type="file" class="custom-file-input" id="ProductBrochure" accept='.png,.jpg,.jpeg' onchange="getProductBrochureBase64()">
                    <label class="custom-file-label" for="ProductBrochure">Choose file</label>
                </div>
                <img id="blahProductBrochure" alt="" height="60" style="padding-top:10px;">
            </div>
        </div>*@

                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service">
                                        <br />
                                        <div class="form-group">
                                            <div class="checkbox icheck-turquoise">
                                                <input checked type="checkbox" id="chkIsManageStock" onchange="CheckManageStock()" />
                                                <label for="chkIsManageStock" class="mt-2">Manage Stock <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Enable or disable stock management for a product."></i></label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 " id="divAlertQuantity">
                                        <div class="form-group">
                                            <label>Alert Quantity <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Get alert when product stock reaches or goes below the specified quantity.<br><br><small class='text-muted'>Products with low stock will be displayed in dashboard - Stock Alert section.</small>"></i></label>
                                            <input type="number" class="form-control" id="txtAlertQuantity" placeholder=""
                                                   onkeypress="return onlyDecimalKey(event)">
                                        </div>
                                    </div>
                                    @if (ViewBag.ItemSetting.EnableItemExpiry == true && ViewBag.ItemSetting.ExpiryType == 2)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service " id="divExpiresIn">
                                            <!-- text input -->
                                            <div class="form-group">
                                                <label>Expires in</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="txtExpiryPeriod" onkeypress="return onlyNumberKey(event)">
                                                    <select class="form-control" style="width: 0;" id="ddlExpiryPeriodType">
                                                        <option value="Days">Days</option>
                                                        <option value="Months">Months</option>
                                                        <option value="Years">Years</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    @if (ViewBag.ItemSetting.EnableWarranty == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service">
                                            <div class="form-group">
                                                <label>Warranty</label>
                                                <div class="input-group">
                                                    <select class="form-control select2" id="ddlWarranty">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.Warrantys)
                                                        {
                                                            <option value="@item.WarrantyId">@item.Warranty</option>
                                                        }
                                                    </select>
                                                    @if (ViewBag.WarrantiesPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#warrantyModal">+ </a>
                                                        </span>
                                                    }

                                                </div>
                                            </div>
                                        </div>
                                    }
                                    @*@if (ViewBag.ItemSetting.EnableImei == true)
        {*@
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <div class="form-group">
                                            <div class="checkbox icheck-turquoise">
                                                <input type="checkbox" id="chkEnableImei" />
                                                <label for="chkEnableImei" class="mt-2">
                                                    Enable Item IMEI, Serial number or other informations
                                                    <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "" : "hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Enable or disable adding IMEI, Serial number or any other informations while selling items"></i>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    @*}*@
                                    @if (ViewBag.ItemSetting.EnableSalt == true)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 service">
                                            <div class="form-group">
                                                <label>Salt</label>
                                                <div class="input-group">
                                                    <select class="form-control select2" id="ddlSalt">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.Salts)
                                                        {
                                                            <option value="@item.SaltId">@item.SaltName</option>
                                                        }
                                                    </select>
                                                    @if (ViewBag.SaltPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openSaltModal()">+ </a>
                                                        </span>
                                                    }

                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <div class="form-group">
                                            <label id="lblProductImage">Product Image </label>
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input" id="ProductImage" accept='.png,.jpg,.jpeg' onchange="getProductImageBase64()">
                                                <label class="custom-file-label" for="ProductImage">Choose file</label>
                                            </div>
                                            <img id="blahProductImage" alt="" height="60" style="padding-top:10px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr style="display:@((ViewBag.ItemSetting.EnableProductDescription == true || ViewBag.Branchs.Count>1 || ViewBag.ItemSetting.EnableRacks == true) ? "block":"none")" />
                            <div class="card-body" style="display:@((ViewBag.ItemSetting.EnableProductDescription == true || ViewBag.Branchs.Count>1 || ViewBag.ItemSetting.EnableRacks == true) ? "block":"none")">
                                <div class="row">
                                    <div class="col-sm-6" style="display:@(ViewBag.ItemSetting.EnableProductDescription == true ? "block":"none")">
                                        <div class="form-group">
                                            <label id="lblProductDescription">Product Description</label>
                                            <textarea id="txtDescription"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 table-responsive" style="display:@((ViewBag.Branchs.Count==1 && ViewBag.ItemSetting.EnableRacks == false)?"none":"")">
                                        <label>Check all the Business Locations where this product is available <span class="danger">*</span></label>
                                        <table id="" class="table table-bordered table-striped divBranches_ctrl">
                                            <thead id="thead">
                                                <tr>
                                                    <th></th>
                                                    <th>Business Location </th>
                                                    @if (ViewBag.ItemSetting.EnableRacks == true)
                                                    {
                                                        <th class="service">Rack (Optional)</th>
                                                    }
                                                    @if (ViewBag.ItemSetting.EnableRow == true)
                                                    {
                                                        <th class="service">Row (Optional)</th>
                                                    }
                                                    @if (ViewBag.ItemSetting.EnablePosition == true)
                                                    {
                                                        <th class="service">Position (Optional)</th>
                                                    }
                                                </tr>
                                            </thead>
                                            <tbody class="table-body">
                                                @{
                                                    var branchCount = 1;
                                                    foreach (var item in ViewBag.Branchs)
                                                    {
                                                        <tr class="divBranch" id="tr@(item.BranchId)">
                                                            <td>
                                                                <div class="form-group">
                                                                    <div class="checkbox icheck-turquoise">
                                                                        <input @(ViewBag.Branchs.Count == 1 ? "disabled" : "") type="checkbox" id="chkBranch@(item.BranchId)" value="@item.BranchId" @(branchCount == 1 ? "checked" : "") />
                                                                        <label for="chkBranch@(item.BranchId)" class="mt-2"></label>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>@item.Branch</td>
                                                            @if (ViewBag.ItemSetting.EnableRacks == true)
                                                            {
                                                                <td class="service">
                                                                    <div class="form-group">
                                                                        <input type="text" class="form-control" id="txtRack@(item.BranchId)" placeholder="">
                                                                    </div>
                                                                </td>
                                                            }
                                                            @if (ViewBag.ItemSetting.EnableRow == true)
                                                            {
                                                                <td class="service">
                                                                    <div class="form-group">
                                                                        <input type="text" class="form-control" id="txtRow@(item.BranchId)" placeholder="">
                                                                    </div>
                                                                </td>
                                                            }
                                                            @if (ViewBag.ItemSetting.EnablePosition == true)
                                                            {
                                                                <td class="service">
                                                                    <div class="form-group">
                                                                        <input type="text" class="form-control" id="txtPosition@(item.BranchId)" placeholder="">
                                                                    </div>
                                                                </td>
                                                            }
                                                        </tr>
                                                        branchCount++;
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                        <small class="text-red font-weight-bold errorText" id="divBranches"></small>
                                    </div>
                                </div>
                                @*<label style="display:@((ViewBag.Branchs.Count==1 && ViewBag.ItemSetting.EnableRacks == false)?"none":"")">Check all the Business Locations where this product is available <span class="danger">*</span></label>
                                    <div class="row mt-1" style="display:@((ViewBag.Branchs.Count==1 && ViewBag.ItemSetting.EnableRacks == false)?"none":"")">

                                    </div>*@
                            </div>
                            <!-- item info -->
                            <hr />
                            <!-- tax info -->
                            @*<div class="card-header">
                                    <h3 class="card-title">Tax Info</h3>
                                </div>*@

                            <div class="card-body">

                                <div class="row">
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label>Tax Preference <span class="danger">*</span></label>
                                            <div class="input-group">
                                                <select class="form-control select2" id="ddlTaxPreference" onchange="toggleTaxPreference()">
                                                    @foreach (var item in ViewBag.Taxs)
                                                    {
                                                        if (item.CanDelete == false)
                                                        {
                                                            <option value="@item.TaxId">@item.Tax</option>
                                                        }
                                                    }
                                                    @*<option value="Taxable">Taxable</option>
                                                        <option value="Non-Taxable">Non-Taxable</option>
                                                        <option value="Out Of Scope">Out Of Scope</option>
                                                        <option value="Non-GST Supply">Non-GST Supply</option>*@
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    @if (ViewBag.BusinessSetting.CountryId == 2)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTaxable">
                                            <!-- text input -->
                                            <div class="form-group">
                                                <label>Intra State Tax <span class="danger">*</span></label>
                                                <div class="input-group divTax_ctrl">
                                                    @*<select class="form-control select2" id="ddlTax" onchange="calulation()">*@
                                                    <select class="form-control select2" id="ddlIntraStateTax">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.Taxs)
                                                        {
                                                            if (item.CanDelete == true)
                                                            {
                                                                if (item.TaxTypeId != 3)
                                                                {
                                                                    <option value="@item.TaxId-@item.TaxPercent.ToString("0")">@item.Tax</option>
                                                                }
                                                            }
                                                        }
                                                    </select>
                                                    @if (ViewBag.TaxListPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openTaxModal()">+ </a>
                                                        </span>
                                                    }
                                                </div>
                                                <small class="text-red font-weight-bold errorText" id="divTax"></small>
                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTaxable">
                                            <!-- text input -->
                                            <div class="form-group">
                                                <label>Applicable Tax <span class="danger">*</span></label>
                                                <div class="input-group divTax_ctrl">
                                                    @*<select class="form-control select2" id="ddlTax" onchange="calulation()">*@
                                                    <select class="form-control select2" id="ddlIntraStateTax">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.Taxs)
                                                        {
                                                            if (item.CanDelete == true)
                                                            {
                                                                <option value="@item.TaxId-@item.TaxPercent.ToString("0")">@item.Tax</option>
                                                            }
                                                        }
                                                    </select>
                                                    @if (ViewBag.TaxListPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openTaxModal()">+ </a>
                                                        </span>
                                                    }

                                                </div>
                                                <small class="text-red font-weight-bold errorText" id="divTax"></small>
                                            </div>
                                        </div>
                                    }
                                    @if (ViewBag.BusinessSetting.CountryId == 2)
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTaxable">
                                            <!-- text input -->
                                            <div class="form-group">
                                                <label>Inter State Tax <span class="danger">*</span></label>
                                                <div class="input-group divInterStateTax_ctrl">
                                                    <select class="form-control select2" id="ddlInterStateTax">
                                                        <option value="0">Select</option>
                                                        @foreach (var item in ViewBag.Taxs)
                                                        {
                                                            if (item.CanDelete == true)
                                                            {
                                                                if (item.TaxTypeId == 3 || item.TaxTypeId == 5)
                                                                {
                                                                    <option value="@item.TaxId-@item.TaxPercent.ToString("0")">@item.Tax</option>
                                                                }
                                                            }
                                                        }
                                                    </select>
                                                    @if (ViewBag.TaxListPermission.IsAdd == true)
                                                    {
                                                        <span class="input-group-append">
                                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openTaxModal()">+ </a>
                                                        </span>
                                                    }
                                                </div>
                                                <small class="text-red font-weight-bold errorText" id="divInterStateTax"></small>
                                            </div>
                                        </div>
                                    }
                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divNonTaxable" style="display:none">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label>Tax Exemption <span class="danger">*</span></label>
                                            <div class="input-group divTaxExemption_ctrl">
                                                <select class="form-control select2" id="ddlTaxExemption">
                                                    <option value="0">Select</option>
                                                    @foreach (var item in ViewBag.TaxExemptions)
                                                    {
                                                        <option value="@item.TaxExemptionId">@item.Reason</option>
                                                    }
                                                </select>
                                                @if (ViewBag.TaxExemptionPermission.IsAdd == true)
                                                {
                                                    <span class="input-group-append">
                                                        <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#taxExemptionModal">+ </a>
                                                    </span>
                                                }
                                            </div>
                                            <small class="text-red font-weight-bold errorText" id="divTaxExemption"></small>
                                        </div>
                                    </div>

                                    @if (ViewBag.ItemSetting.TaxType == "Inclusive" || ViewBag.ItemSetting.TaxType == "Exclusive")
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3" style="display: none">
                                            <div class="form-group divTaxType_ctrl">
                                                <label>Selling Price Tax Type </label>
                                                <select class="form-control" style="width: 100%;" id="ddlTaxType" onchange="checkTaxType()">
                                                    @if (ViewBag.ItemSetting.TaxType == "Inclusive")
                                                    {
                                                        <option value="Inclusive" selected>Inclusive</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="Exclusive">Exclusive</option>
                                                    }
                                                    @if (ViewBag.ItemSetting.TaxType == "Exclusive")
                                                    {
                                                        <option value="Inclusive">Inclusive</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="Exclusive" selected>Exclusive</option>
                                                    }
                                                </select>
                                                <small class="text-red font-weight-bold errorText" id="divTaxType"></small>
                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 divTaxType">
                                            <div class="form-group divTaxType_ctrl">
                                                <label>Selling Price Tax Type</label>
                                                <select class="form-control" style="width: 100%;" id="ddlTaxType" onchange="checkTaxType()">
                                                    <option value="Inclusive" selected>Inclusive</option>
                                                    <option value="Exclusive">Exclusive</option>
                                                </select>
                                                <small class="text-red font-weight-bold errorText" id="divTaxType"></small>
                                            </div>
                                        </div>
                                    }



                                    <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3 hidden">
                                        <!-- text input -->
                                        <div class="form-group" style="display:@((ViewBag.ItemSetting.EnableSecondaryUnit == false &&
                ViewBag.ItemSetting.EnableTertiaryUnit == false && ViewBag.ItemSetting.EnableQuaternaryUnit == false) ? "none" : "")">
                                            <label>Price Added For<span class="danger">*</span></label>
                                            <select class="form-control" style="width: 100%;" id="ddlPriceAddedFor">
                                                <option selected="selected" value="4">Unit</option>
                                                @*@if (ViewBag.ItemSetting.EnableSecondaryUnit == true)
                                                    {
                                                        <option value="2">Secondary Unit</option>
                                                    }
                                                    @if (ViewBag.ItemSetting.EnableTertiaryUnit == true)
                                                    {
                                                        <option value="3">Tertiary Unit</option>
                                                    }
                                                    @if (ViewBag.ItemSetting.EnableQuaternaryUnit == true)
                                                    {
                                                        <option value="4">Quaternary Unit</option>
                                                    }*@
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- tax info -->
                            <hr />
                            @*<div class="card-header">
                                    <h3 class="card-title">
                                        Search Items
                                    </h3>
                                </div>*@
                            <!-- form start -->
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-12">
                                        <!--Single Product--->
                                        <div id="singleproduct">
                                            <div class="callout callout-info divSecondaryUnit hidden service">
                                                <h5><i class="fas fa-info"></i> Note:</h5>
                                                Set price for primary unit. Rest unit prices will be calculated automatically
                                            </div>
                                            <div class="table-responsive">
                                                <table class="table table-bordered add-product-price-table table-condensed ">
                                                    <tbody>
                                                        <tr>
                                                            <th class="divInventoryAccount service" @(ViewBag.IsPurchaseAddon == true && ViewBag.IsAccountsAddon == true ? "" : "hidden")>Inventory Account</th>
                                                            <th @(ViewBag.IsPurchaseAddon == true ? "" : "hidden")>
                                                                Purchase Price <span class="danger">*</span><br />
                                                                @if (ViewBag.ItemSetting.TaxType == "Inclusive" || ViewBag.ItemSetting.TaxType == "Let me choose")
                                                                {
                                                                    <small class="lblTaxName">
                                                                        (Inc.Tax)
                                                                    </small>
                                                                }
                                                                else
                                                                {
                                                                    <small class="lblTaxName">
                                                                        (Exc.Tax)
                                                                    </small>
                                                                }
                                                            </th>

                                                            <th @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>Purchase Account</th>

                                                            <th @(ViewBag.IsPurchaseAddon == true ? "" : "hidden")>Profit Margin(%) <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Default profit margin for the product. <br><small class='text-muted'>(<i>You can manage default profit margin in Business Settings.</i>)</small>"></i></th>
                                                            <th>
                                                                Selling Price <span class="danger">*</span> <br />
                                                                @if (ViewBag.ItemSetting.TaxType == "Inclusive" || ViewBag.ItemSetting.TaxType == "Let me choose")
                                                                {
                                                                    <small class="lblTaxName">
                                                                        (Inc.Tax)
                                                                    </small>
                                                                }
                                                                else
                                                                {
                                                                    <small class="lblTaxName">
                                                                        (Exc.Tax)
                                                                    </small>
                                                                }
                                                            </th>
                                                            <th @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>Sales Account</th>
                                                            <th style="display:@(ViewBag.ItemSetting.EnableMrp == false ? "none" : "")" class=""> MRP</th>
                                                            @*<th>Product image</th>*@
                                                        </tr>
                                                        <tr>
                                                            <td class="divInventoryAccount service" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            @*<label> Purchase Account<span class="danger">*</span></label>*@
                                                                            <div class="input-group">
                                                                                <select class="form-control select2" id="ddlInventoryAccount">
                                                                                    @{
                                                                                        if (ViewBag.AccountSubTypes != null)
                                                                                        {
                                                                                            foreach (var item in ViewBag.AccountSubTypes)
                                                                                            {
                                                                                                if (item.Accounts.Count > 0)
                                                                                                {
                                                                                                    if (item.Type == "Stock")
                                                                                                    {
                                                                                                        <optgroup label="@item.DisplayAs">
                                                                                                            @foreach (var inner in item.Accounts)
                                                                                                            {
                                                                                                                if (inner.Type == "Inventory Asset")
                                                                                                                {
                                                                                                                    <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                                                                }
                                                                                                            }
                                                                                                        </optgroup>
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td @(ViewBag.IsPurchaseAddon == true ? "" : "hidden")>
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        @*<label for="single_dpp">Exc. tax:<span class="danger">*</span></label>*@

                                                                        <input class="form-control input-sm dpp input_number divPurchaseExcTax_ctrl" placeholder="" required="" name="single_dpp"
                                                                               type="number" id="txtPurchaseExcTax" onchange="UpdateSingleAmount('PExc')" onkeypress="return onlyDecimalKey(event)">
                                                                        <small class="text-red font-weight-bold errorText" id="divPurchaseExcTax"></small>
                                                                    </div>

                                                                    @*<div class="col-sm-6">
                                                                            <label for="single_dpp_inc_tax">Inc. tax:<span class="danger">*</span></label>

                                                                            <input class="form-control input-sm dpp_inc_tax input_number" placeholder="" required="" name="single_dpp_inc_tax"
                                                                                   type="number" id="txtPurchaseIncTax" onchange="UpdateSingleAmount('PInc')" onkeypress="return onlyDecimalKey(event)">
                                                                            <small class="text-red font-weight-bold errorText" id="divPurchaseIncTax"></small>
                                                                        </div>*@

                                                                </div>
                                                            </td>
                                                            <td @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            @*<label> Purchase Account<span class="danger">*</span></label>*@
                                                                            <div class="input-group divFromAccount_ctrl">
                                                                                <select class="form-control select2" id="ddlPurchaseAccount">
                                                                                    @{
                                                                                        if (ViewBag.AccountSubTypes != null)
                                                                                        {
                                                                                            foreach (var item in ViewBag.AccountSubTypes)
                                                                                            {
                                                                                                if (item.Accounts.Count > 0)
                                                                                                {
                                                                                                    if (item.AccountType == "Expense")
                                                                                                    {
                                                                                                        <optgroup label="@item.DisplayAs">
                                                                                                            @foreach (var inner in item.Accounts)
                                                                                                            {
                                                                                                                if (inner.Type == "Cost of Goods Sold")
                                                                                                                {
                                                                                                                    <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                                                                }

                                                                                                            }
                                                                                                        </optgroup>
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                </select>
                                                                                <small class="text-red font-weight-bold errorText" id="divFromAccount"></small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td @(ViewBag.IsPurchaseAddon == true ? "" : "hidden")>
                                                                @*<label>Default Profit Margin <span class="danger">*</span></label>*@
                                                                <input class="form-control input-sm input_number divDefaultProfitMargin_ctrl" id="txtDefaultProfitMargin" required="" name="profit_percent"
                                                                       type="number" value="@(ViewBag.ItemSetting.DefaultProfitPercent > 0 ? ViewBag.ItemSetting.DefaultProfitPercent :"")" placeholder="" onchange="UpdateSingleAmount('Margin')"
                                                                       onkeypress="return onlyDecimalKey(event)">
                                                                <input type="hidden" value="@ViewBag.ItemSetting.DefaultProfitPercent" id="hdnDefaultProfitMargin" />
                                                                <small class="text-red font-weight-bold errorText" id="divDefaultProfitMargin"></small>
                                                            </td>

                                                            <td>
                                                                <div class="row">
                                                                    @*<div class="col-sm-12 hidden divSellingPriceExcTax" id="">*@
                                                                    <div class="col-sm-12" id="">
                                                                        @*<label for="single_dpp">Exc. Tax:<span class="danger">*</span></label>*@

                                                                        <input class="form-control input-sm dpp input_number divSalesExcTax_ctrl" placeholder="" required="" name="single_dpp"
                                                                               type="number" id="txtSalesExcTax" onchange="UpdateSingleAmount('SExc')" onkeypress="return onlyDecimalKey(event)">
                                                                        <small class="text-red font-weight-bold errorText" id="divSalesExcTax"></small>
                                                                    </div>

                                                                    @*<div class="col-sm-12 divSellingPriceIncTax" id="">
                                                                            <label for="single_dpp_inc_tax">Inc. Tax:<span class="danger">*</span></label>
                                                                            <input class="form-control input-sm dpp_inc_tax input_number" placeholder="" required="" name="single_dpp_inc_tax"
                                                                                   type="number" id="txtSalesIncTax" onchange="UpdateSingleAmount('SInc')" onkeypress="return onlyDecimalKey(event)">
                                                                            <small class="text-red font-weight-bold errorText" id="divSalesIncTax"></small>
                                                                        </div>*@

                                                                </div>
                                                                @*<label><span class="dsp_label">Exc. Tax</span></label>
                                                                    <input class="form-control input-sm dsp input_number" placeholder="Exc. tax" id="single_dsp" required="" name="single_dsp" type="text">*@
                                                            </td>
                                                            <td @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group" id="divFTAccount">
                                                                            @*<label> Sales Account<span class="danger">*</span></label>*@
                                                                            <div class="input-group divFromAccount_ctrl">
                                                                                <select class="form-control select2" id="ddlSalesAccount">
                                                                                    @{
                                                                                        if (ViewBag.AccountSubTypes != null)
                                                                                        {
                                                                                            foreach (var item in ViewBag.AccountSubTypes)
                                                                                            {
                                                                                                if (item.Accounts.Count > 0)
                                                                                                {
                                                                                                    if (item.AccountType == "Income")
                                                                                                    {
                                                                                                        <optgroup label="@item.DisplayAs">
                                                                                                            @foreach (var inner in item.Accounts)
                                                                                                            {
                                                                                                                if (inner.Type == "Sales")
                                                                                                                {
                                                                                                                    <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                                                                }

                                                                                                            }
                                                                                                        </optgroup>
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                </select>
                                                                                <small class="text-red font-weight-bold errorText" id="divFromAccount"></small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td style="display:@(ViewBag.ItemSetting.EnableMrp == false ? "none" : "")" class="">
                                                                <div>
                                                                    @*<label>Default MRP <span class="danger">*</span></label>*@
                                                                    <input class="form-control input-sm input_number divDefaultMrp_ctrl" id="txtDefaultMRP" required="" name=""
                                                                           type="number" placeholder="" onkeypress="return onlyDecimalKey(event)">
                                                                    <small class="text-red font-weight-bold errorText" id="divDefaultMrp"></small>
                                                                </div>

                                                            </td>
                                                            @*<td style="min-width:200px">
                                                                    <div class="">
                                                                        <div class="custom-file">
                                                                            <input style="min-width:100px" type="file" class="custom-file-input" id="ProductImage0" accept='image/*' onchange="getImageBase64(0)">
                                                                            <input type="hidden" id="txtHiddenFile0" />
                                                                            <input type="hidden" id="txtHiddenFileExtension0" />
                                                                            <label class="custom-file-label" for="ProductImage0">Choose file</label>
                                                                        </div>

                                                                    </div>
                                                                    <img id="blahProductImage0" alt="" height="60" style="padding-top:10px;">
                                                                </td>*@
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <hr />
                                        </div>
                                        <!--Single Product--->
                                        <!--Variable Product--->
                                        <div id="variableproduct">
                                            <div class="row">
                                                <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                                                    <div class="form-group">
                                                        <div class="input-group">
                                                            <label class="w-50">Variation Values</label>
                                                            <span class="input-group-append">
                                                                <a href="javascriptt:void(0)" class="btn btn-info btn-sm add-row divVariationValues_ctrl" onclick="AddNewVariation()"><i class="fas fa-plus"> Add</i></a>
                                                            </span>
                                                            <input type="hidden" id="hdnVariationPermissionIsAdd" value="@(ViewBag.VariationPermission.IsAdd.ToString())" />
                                                        </div>
                                                        <small class="text-red font-weight-bold errorText" id="divVariationValues"></small>
                                                        <br />
                                                        <div id="addrow">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="table-responsive" id="divVariation">
                                                    </div>
                                                </div>
                                            </div>
                                            <hr />
                                        </div>

                                        <!--Variable Product--->
                                        <!--Combo Product--->
                                        <div id="comboproduct">
                                            <div class="row">
                                                <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-6 mb-3">
                                                    <div class="input-group ">
                                                        @*<div class="input-group-prepend">
                                                                <span class="input-group-text"><i class="fas fa-barcode"></i></span>
                                                            </div>*@
                                                        <input type="text" class="form-control divtags_ctrl" placeholder="Sku Code/ Item Name" id="txttags">
                                                    </div>
                                                    <small class="text-red font-weight-bold errorText" id="divtags"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-6">
                                                    <div class="table-responsive">
                                                        <br><table class="table table-bordered table-striped">
                                                            <thead>
                                                                <tr>
                                                                    <th class="text-center">
                                                                        Product Name
                                                                    </th>
                                                                    <th class="text-center">
                                                                        Quantity <span class="danger">*</span>
                                                                    </th>
                                                                    <th class="text-center">
                                                                        <button type="button" class="btn btn-danger btn-sm" onclick="deleteFullCombo()">
                                                                            <i class="fas fa-times"></i>
                                                                        </button>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="divCombo">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">

                                                <!--<div class="col-sm-4" @(ViewBag.IsPurchaseAddon == true ? "" : "hidden")>-->
                                                <!-- text input -->
                                                <!--<div class="form-group">
                                                        <label>x Margin(%): <span class="danger">*</span></label>
                                                        <input type="number" class="form-control" value="@ViewBag.ItemSetting.DefaultProfitPercent" id="txtComboDefaultMargin" placeholder=""
                                                               onchange="UpdateComboAmount('2')" onkeypress="return onlyDecimalKey(event)">
                                                    </div>
                                                </div>-->
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                                    <div class="form-group" id="divFTAccount">
                                                        <label> Sales Account<span class="danger">*</span></label>
                                                        <div class="input-group divFromAccount_ctrl">
                                                            <select class="form-control select2" id="ddlComboSalesAccount">
                                                                @{
                                                                    if (ViewBag.AccountSubTypes != null)
                                                                    {
                                                                        foreach (var item in ViewBag.AccountSubTypes)
                                                                        {
                                                                            if (item.Accounts.Count > 0)
                                                                            {
                                                                                if (item.AccountType == "Income")
                                                                                {
                                                                                    <optgroup label="@item.DisplayAs">
                                                                                        @foreach (var inner in item.Accounts)
                                                                                        {
                                                                                            if (inner.Type == "Sales")
                                                                                            {
                                                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                                            }

                                                                                        }
                                                                                    </optgroup>
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                                    <!-- text input -->
                                                    <div class="form-group">
                                                        <label> Selling Price: <span class="danger">*</span></label>
                                                        <input type="text" class="form-control divComboSalesExcTax_ctrl" id="txtComboSalesExcTax" onkeypress="return onlyDecimalKey(event)" onchange="UpdateComboAmount('3')">
                                                        @*<input type="text" class="form-control divSellingPriceIncTax" id="txtComboSalesIncTax" onchange="UpdateComboAmount('3')">*@
                                                        <small class="text-red font-weight-bold errorText" id="divComboSalesExcTax"></small>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2" style="display: @(ViewBag.ItemSetting.EnableMrp == false ? "none" : "")">
                                                    <!-- text input -->
                                                    <div class="form-group">
                                                        <label> Mrp: </label>
                                                        <input type="number" class="form-control" id="txtComboDefaultMrp" onkeypress="return onlyDecimalKey(event)">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Combo Product--->
                                    </div>
                                </div>


                            </div>
                            <!-- /.card-body -->

                        </div>
                        <!-- /.card -->
                    </div>
                    <!--/.col (left) -->

                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <input type="hidden" id="hdnEnableMrp" value="@ViewBag.ItemSetting.EnableMrp.ToString()" />
                <input type="hidden" id="hdnIsPurchaseAddon" value="@ViewBag.IsPurchaseAddon.ToString()" />
                <input type="hidden" id="hdnIsAccountsAddon" value="@ViewBag.IsAccountsAddon.ToString()" />
                <input type="hidden" id="hdnCountryId" value="@ViewBag.BusinessSetting.CountryId" />
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertItem()">Save changes</button>
            </div>
        </div>
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="warrantyModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Warranty</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Warranty Name<span class="danger">*</span></label>
                            <input type="text" class="form-control divWarranty_M_ctrl" id="txtWarranty" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divWarranty_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" class="form-control" id="txtDescription" placeholder="">
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Duration <span class="danger">*</span></label>
                            <div class="input-group divDurationNo_M_ctrl">
                                <input type="text" class="form-control" id="txtDurationNo" placeholder="" onkeypress="return onlyNumberKey(event)">
                                <span class="input-group-append">
                                    <select class="form-control" id="ddlDuration">
                                        <option value="Days">Days</option>
                                        <option value="Months">Months</option>
                                        <option value="Years">Years</option>
                                    </select>
                                </span>
                            </div>
                            <small class="text-red font-weight-bold errorText" id="divDurationNo_M"></small>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertWarranty()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="unitModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Unit</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Unit Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divUnitName_M_ctrl" id="txtUnitName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divUnitName_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Unit Short Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divUnitShortName_M_ctrl" id="txtUnitShortName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divUnitShortName_M"></small>
                        </div>
                    </div>

                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertUnit()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="secondaryUnitModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Secondary Unit</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Secondary Unit Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divSecondaryUnitName_M_ctrl" id="txtSecondaryUnitName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divSecondaryUnitName_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Secondary Unit Short Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divSecondaryUnitShortName_M_ctrl" id="txtSecondaryUnitShortName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divSecondaryUnitShortName_M"></small>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertSecondaryUnit()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="tertiaryUnitModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Tertiary Unit</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Tertiary Unit Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divTertiaryUnitName_M_ctrl" id="txtTertiaryUnitName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divTertiaryUnitName_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Tertiary Unit Short Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divTertiaryUnitShortName_M_ctrl" id="txtTertiaryUnitShortName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divTertiaryUnitShortName_M"></small>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertTertiaryUnit()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="quaternaryUnitModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Quaternary Unit</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Quaternary Unit Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divQuaternaryUnitName_M_ctrl" id="txtQuaternaryUnitName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divQuaternaryUnitName_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Quaternary Unit Short Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divQuaternaryUnitShortName_M_ctrl" id="txtQuaternaryUnitShortName" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divQuaternaryUnitShortName_M"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertQuaternaryUnit()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="brandModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Brand</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Brand Code <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                                <input type="text" class="form-control" id="txtBrandCode" placeholder="">
                            </div>
                        </div>*@
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Brand Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divBrand_M_ctrl" id="txtBrand" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divBrand_M"></small>
                        </div>
                    </div>

                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertBrand()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="categoryModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Category</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Category Code <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                                <input type="text" class="form-control" id="txtCategoryCode" placeholder="">
                            </div>
                        </div>*@
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Category Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divCategory_M_ctrl" id="txtCategory" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divCategory_M"></small>
                        </div>
                    </div>

                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertCategory()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="subCategoryModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Sub Category</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Sub Category Code <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                                <input type="text" class="form-control" id="txtSubCategoryCode" placeholder="">
                            </div>
                        </div>*@
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Category <span class="danger">*</span></label>
                                <div class="input-group">
                                    <select class="form-control select2" style="width: 100%;" id="ddlNewCategory">
                                        @foreach (var item in ViewBag.Categories)
                                        {
                                            <option value="@item.CategoryId">@item.Category</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>*@
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Sub Category Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divSubCategory_M_ctrl" id="txtSubCategory" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divSubCategory_M"></small>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertSubCategory()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="subSubCategoryModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Sub Sub Category</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Sub Sub Category Code <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                                <input type="text" class="form-control" id="txtSubSubCategoryCode" placeholder="">
                            </div>
                        </div>*@
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Category <span class="danger">*</span></label>
                                <div class="input-group">
                                    <select class="form-control select2" style="width: 100%;" id="ddlModalCategory" onchange="fetchActiveModalSubCategories()">
                                        <option value="0">Select</option>
                                        @foreach (var item in ViewBag.Categories)
                                        {
                                            <option value="@item.CategoryId">@item.Category</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>*@
                    @*<div class="col-sm-6" id="p_ModalSubCategories_Dropdown">
                            <label>Sub Category <span class="danger">*</span></label>
                            <div class="input-group">
                                <select class="form-control select2" style="width: 100%;" id="ddlModalSubCategory">
                                </select>
                            </div>

                        </div>*@
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Sub Sub Category Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divSubSubCategory_M_ctrl" id="txtSubSubCategory" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divSubSubCategory_M"></small>
                        </div>
                    </div>
                </div>
                @*<div class="row">

                    </div>*@

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertSubSubCategory()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="variationModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Variation</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    @*<div class="col-sm-6">
                            <div class="form-group">
                                <label>Variation Code  <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                                <input type="text" class="form-control" id="txtVariationCode" placeholder="">
                                <small class="text-red font-weight-bold errorText" id="divVariationCode_M"></small>
                            </div>
                        </div>*@
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Variation Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divVariation_M_ctrl" id="txtVariation" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divVariation_M"></small>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-8">
                        <div class="form-group">
                            <div class="input-group">
                                <label class="w-50">Variation Values <span class="danger">*</span></label>

                                <span class="input-group-append">
                                    <a href="javascript:vod(0)" class="btn btn-info btn-sm add-new-row divVariationDetails_M_ctrl"><i class="fas fa-plus"> Add</i></a>
                                </span>
                            </div>
                            <small class="text-red font-weight-bold errorText" id="divVariationDetails_M"></small>
                            <br />
                            <div id="addNewRow">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertVariation()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="taxModal" style="z-index:1051 !important">
    <div class="modal-dialog modal-lg">
        <div class="modal-content divTaxModal">
            <div class="modal-header">
                <h4 class="modal-title">Add Tax</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Tax Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divTax_M_ctrl" id="txtNewTax" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divTax_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Tax Rate(%) @*<span class="danger">*</span>*@</label>
                            <input type="number" class="form-control divTaxPercent_M_ctrl" id="txtNewTaxpercent" placeholder="" onkeypress="return onlyDecimalKey(event)">
                            <small class="text-red font-weight-bold errorText" id="divTaxPercent_M"></small>
                        </div>
                    </div>
                    @if (ViewBag.TaxTypes.Count != 0)
                    {
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Tax Type</label>
                                <div class="input-group divTaxType_ctrl">
                                    <select class="form-control select2" id="ddlNewTaxType">
                                        @foreach (var item in ViewBag.TaxTypes)
                                        {
                                            <option value="@item.TaxTypeId">@item.TaxType</option>
                                        }
                                    </select>
                                </div>
                                <small class="text-red font-weight-bold errorText" id="divTaxType"></small>
                            </div>
                        </div>
                    }
                    @*<div class="col-sm-4">
                            <div class="form-group">
                                <br />
                                <div class="checkbox icheck-turquoise">
                                    <input type="checkbox" id="chkNewForTaxGroupOnly" onchange="toggleForTaxGroupOnly(1)">
                                    <label for="chkNewForTaxGroupOnly" class="mt-2">
                                        For Tax Group only
                                        <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="If checked, this tax will not be displayed individually in dropdowns, only can be added in tax group"></i>
                                    </label>
                                </div>
                            </div>
                        </div>*@
                </div>
                <hr @((ViewBag.BusinessSetting.CountryId == 2) ? "hidden" : "") />
                <div class="row divNewAccounts" @((ViewBag.BusinessSetting.CountryId == 2) ? "hidden" : "")>
                    <div class="col-sm-4 mt-2" @((ViewBag.IsAccountsAddon == true && ViewBag.IsPurchaseAddon == true) ? "" : "hidden")>
                        <div class="form-group">
                            <label> Tax Account (Purchase) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a purchase is made"></i></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlNewPurchaseAccount">
                                    @{
                                        if (ViewBag.AccountSubTypes != null)
                                        {
                                            foreach (var item in ViewBag.AccountSubTypes)
                                            {
                                                if (item.Accounts.Count > 0)
                                                {
                                                    //if (item.Type == "Other Current Asset")
                                                    //{
                                                    <optgroup label="@item.DisplayAs">
                                                        @foreach (var inner in item.Accounts)
                                                        {
                                                            if (inner.Type == "Input Tax")
                                                            {
                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                            }

                                                        }
                                                    </optgroup>
                                                    //}
                                                }
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 mt-2" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                        <div class="form-group">
                            <label> Tax Account (Sales) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a sales is made"></i></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlNewSalesAccount">
                                    @{
                                        if (ViewBag.AccountSubTypes != null)
                                        {
                                            foreach (var item in ViewBag.AccountSubTypes)
                                            {
                                                if (item.Accounts.Count > 0)
                                                {
                                                    //if (item.Type == "Other Current Liability")
                                                    //{
                                                    <optgroup label="@item.DisplayAs">
                                                        @foreach (var inner in item.Accounts)
                                                        {
                                                            if (inner.Type == "Output Tax")
                                                            {
                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                            }

                                                        }
                                                    </optgroup>
                                                    //}
                                                }
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 mt-2" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                        <div class="form-group">
                            <label> Tax Account (Expense) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a expense is made"></i></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlNewExpenseAccount">
                                    @{
                                        if (ViewBag.AccountSubTypes != null)
                                        {
                                            foreach (var item in ViewBag.AccountSubTypes)
                                            {
                                                if (item.Accounts.Count > 0)
                                                {
                                                    //if (item.Type == "Other Current Asset")
                                                    //{
                                                    <optgroup label="@item.DisplayAs">
                                                        @foreach (var inner in item.Accounts)
                                                        {
                                                            if (inner.Type == "Input Tax")
                                                            {
                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                            }

                                                        }
                                                    </optgroup>
                                                    //}
                                                }
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <a href="javascript:void(0)" onclick="toggleTaxModal('TaxGroup')">Add New Tax Group</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertTax()">Save changes</button>
            </div>
        </div>
        <div class="modal-content divTaxGroupModal hidden">
            <div class="modal-header">
                <h4 class="modal-title">Add Tax Group</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Tax Group Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divTaxGroup_M_ctrl" id="txtNewTaxGroup" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divTaxGroup_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Sub Taxes <span class="danger">*</span></label>
                            <div class="input-group divSubTax_M_ctrl">
                                <select id="ddlNewSubTax" class="select2" multiple="multiple" data-placeholder="" onchange="FetchTaxPercent()">
                                    @foreach (var item in ViewBag.TaxsForGroup)
                                    {
                                        if (item.CanDelete == true)
                                        {
                                            <option value="@item.TaxId">@item.Tax</option>
                                        }
                                    }
                                </select>
                                <span class="input-group-append">
                                    <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#taxInnerModal">+ </a>
                                </span>
                            </div>
                            <small class="text-red font-weight-bold errorText" id="divSubTax_M"></small>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Tax Rate(%) @*<span class="danger">*</span>*@</label>
                            <input type="number" class="form-control" id="txtNewTaxpercentGroup" disabled>
                        </div>
                    </div>
                </div>
                @*<hr />
                    <div class="row divNewSubTaxAccounts">
                        <div class="col-sm-4 mt-2" @((ViewBag.IsAccountsAddon == true && ViewBag.IsPurchaseAddon == true) ? "" : "hidden")>
                            <div class="form-group">
                                <label> Tax Account (Purchase) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a purchase is made"></i></label>
                                <div class="input-group">
                                    <select class="form-control select2" id="ddlNewSubTaxPurchaseAccount">
                                        @{
                                            if (ViewBag.AccountSubTypes != null)
                                            {
                                                foreach (var item in ViewBag.AccountSubTypes)
                                                {
                                                    if (item.Accounts.Count > 0)
                                                    {
                                                        <optgroup label="@item.DisplayAs">
                                                            @foreach (var inner in item.Accounts)
                                                            {
                                                                if (inner.Type == "Input Tax")
                                                                {
                                                                    <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                }

                                                            }
                                                        </optgroup>
                                                    }
                                                }
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 mt-2" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                            <div class="form-group">
                                <label> Tax Account (Sales) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a sales is made"></i></label>
                                <div class="input-group">
                                    <select class="form-control select2" id="ddlNewSubTaxSalesAccount">
                                        @{
                                            if (ViewBag.AccountSubTypes != null)
                                            {
                                                foreach (var item in ViewBag.AccountSubTypes)
                                                {
                                                    if (item.Accounts.Count > 0)
                                                    {
                                                        <optgroup label="@item.DisplayAs">
                                                            @foreach (var inner in item.Accounts)
                                                            {
                                                                if (inner.Type == "Output Tax")
                                                                {
                                                                    <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                }

                                                            }
                                                        </optgroup>
                                                    }
                                                }
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 mt-2" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                            <div class="form-group">
                                <label> Tax Account (Expense) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a expense is made"></i></label>
                                <div class="input-group">
                                    <select class="form-control select2" id="ddlNewSubTaxExpenseAccount">
                                        @{
                                            if (ViewBag.AccountSubTypes != null)
                                            {
                                                foreach (var item in ViewBag.AccountSubTypes)
                                                {
                                                    if (item.Accounts.Count > 0)
                                                    {
                                                        <optgroup label="@item.DisplayAs">
                                                            @foreach (var inner in item.Accounts)
                                                            {
                                                                if (inner.Type == "Input Tax")
                                                                {
                                                                    <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                                }

                                                            }
                                                        </optgroup>
                                                    }
                                                }
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>*@
                <div class="row">

                    <div class="col-sm-12">
                        <div class="form-group">
                            <a href="javascript:void(0)" onclick="toggleTaxModal('Tax')">Add New Tax </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertTaxGroup()">Save changes</button>
            </div>
        </div>
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="taxInnerModal" style="z-index:1052 !important">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Tax</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Tax Name <span class="danger">*</span></label>
                            <input type="text" class="form-control divTax_N_ctrl" id="txtNewTax_N" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divTax_N"></small>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Tax Rate(%) @*<span class="danger">*</span>*@</label>
                            <input type="number" class="form-control divTaxPercent_N_ctrl" id="txtNewTaxpercent_N" placeholder="" onkeypress="return onlyDecimalKey(event)">
                            <small class="text-red font-weight-bold errorText" id="divTaxPercent_N"></small>
                        </div>
                    </div>
                    @if (ViewBag.TaxTypes.Count != 0)
                    {
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Tax Type </label>
                                <div class="input-group divTaxType_ctrl">
                                    <select class="form-control select2" id="ddlTaxType_N">
                                        @foreach (var item in ViewBag.TaxTypes)
                                        {
                                            <option value="@item.TaxTypeId">@item.TaxType</option>
                                        }
                                    </select>
                                </div>
                                <small class="text-red font-weight-bold errorText" id="divTaxType"></small>
                            </div>
                        </div>
                    }
                    <div class="col-sm-4">
                        <div class="form-group">
                            <br />
                            <div class="checkbox icheck-turquoise">
                                <input type="checkbox" id="chkForTaxGroupOnly_N" onchange="toggleForTaxGroupOnly(2)">
                                <label for="chkForTaxGroupOnly_N" class="mt-2">
                                    For Tax Group only
                                    <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="If checked, this tax will not be displayed individually in dropdowns, only can be added in tax group"></i>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <hr @((ViewBag.BusinessSetting.CountryId == 2) ? "hidden" : "") />
                <div class="row divAccounts_N" @((ViewBag.BusinessSetting.CountryId == 2) ? "hidden" : "")>
                    <div class="col-sm-4 mt-2" @((ViewBag.IsAccountsAddon == true && ViewBag.IsPurchaseAddon == true) ? "" : "hidden")>
                        <div class="form-group">
                            <label> Tax Account (Purchase) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a purchase is made"></i></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlPurchaseAccount_N">
                                    @{
                                        if (ViewBag.AccountSubTypes != null)
                                        {
                                            foreach (var item in ViewBag.AccountSubTypes)
                                            {
                                                if (item.Accounts.Count > 0)
                                                {
                                                    //if (item.Type == "Other Current Asset")
                                                    //{
                                                    <optgroup label="@item.DisplayAs">
                                                        @foreach (var inner in item.Accounts)
                                                        {
                                                            if (inner.Type == "Input Tax")
                                                            {
                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                            }

                                                        }
                                                    </optgroup>
                                                    //}
                                                }
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 mt-2" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                        <div class="form-group">
                            <label> Tax Account (Sales) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a sales is made"></i></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlSalesAccount_N">
                                    @{
                                        if (ViewBag.AccountSubTypes != null)
                                        {
                                            foreach (var item in ViewBag.AccountSubTypes)
                                            {
                                                if (item.Accounts.Count > 0)
                                                {
                                                    //if (item.Type == "Other Current Liability")
                                                    //{
                                                    <optgroup label="@item.DisplayAs">
                                                        @foreach (var inner in item.Accounts)
                                                        {
                                                            if (inner.Type == "Output Tax")
                                                            {
                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                            }

                                                        }
                                                    </optgroup>
                                                    //}
                                                }
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 mt-2" @(ViewBag.IsAccountsAddon == true ? "" : "hidden")>
                        <div class="form-group">
                            <label> Tax Account (Expense) <span class="danger">*</span> <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Choose the account where this Tax will be linked when a expense is made"></i></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlExpenseAccount_N">
                                    @{
                                        if (ViewBag.AccountSubTypes != null)
                                        {
                                            foreach (var item in ViewBag.AccountSubTypes)
                                            {
                                                if (item.Accounts.Count > 0)
                                                {
                                                    //if (item.Type == "Other Current Asset")
                                                    //{
                                                    <optgroup label="@item.DisplayAs">
                                                        @foreach (var inner in item.Accounts)
                                                        {
                                                            if (inner.Type == "Input Tax")
                                                            {
                                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                                            }

                                                        }
                                                    </optgroup>
                                                    //}
                                                }
                                            }
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertInnerTax()">Save changes</button>
            </div>
        </div>
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="itemCodeModal" style="z-index:1050 !important">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add HSN/ SAC Code</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Type</label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlItemCodeType_N">
                                    <option value="HSN">HSN</option>
                                    <option value="SAC">SAC</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label id="lblCode">HSN Code <span class="danger">*</span></label>
                            <input type="text" class="form-control divCode_N_ctrl" id="txtCode_N" placeholder="Start typing to search">
                            <small class="text-red font-weight-bold errorText" id="divCode_N"></small>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Tax Preference</label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlTaxPreference_N" onchange="toggleTaxPreference1()">
                                    @foreach (var item in ViewBag.Taxs)
                                    {
                                        if (item.CanDelete == false)
                                        {
                                            <option value="@item.TaxId">@item.Tax</option>
                                        }
                                    }
                                    @*<option value="Taxable">Taxable</option>
                                        <option value="Non-Taxable">Non-Taxable</option>
                                        <option value="Out Of Scope">Out Of Scope</option>
                                        <option value="Non-GST Supply">Non-GST Supply</option>*@
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 divTaxable_N">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Intra State Tax <span class="danger">*</span></label>
                            <div class="input-group divIntraStateTax_N_ctrl">
                                <select class="form-control select2" id="ddlIntraStateTax_N">
                                    <option value="0">Select</option>
                                    @foreach (var item in ViewBag.Taxs)
                                    {
                                        if (item.CanDelete == true)
                                        {
                                            if (item.TaxTypeId != 3)
                                            {
                                                <option value="@item.TaxId-@item.TaxPercent.ToString("0")">@item.Tax</option>
                                            }
                                        }
                                    }
                                </select>
                                @if (ViewBag.TaxListPermission.IsAdd == true)
                                {
                                    <span class="input-group-append">
                                        <a href="javascript:void(0)" class="btn btn-info" onclick="openTaxModal('IntraStateTax')">+ </a>
                                    </span>
                                }
                            </div>
                        </div>
                        <small class="text-red font-weight-bold errorText" id="divIntraStateTax_N"></small>
                    </div>
                    <div class="col-sm-6 divTaxable_N">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Inter State Tax <span class="danger">*</span></label>
                            <div class="input-group divInterStateTax_N_ctrl">
                                <select class="form-control select2" id="ddlInterStateTax_N">
                                    <option value="0">Select</option>
                                    @foreach (var item in ViewBag.Taxs)
                                    {
                                        if (item.CanDelete == true)
                                        {
                                            if (item.TaxTypeId == 3 || item.TaxTypeId == 5)
                                            {
                                                <option value="@item.TaxId-@item.TaxPercent.ToString("0")">@item.Tax</option>
                                            }
                                        }
                                    }
                                </select>
                                @if (ViewBag.TaxListPermission.IsAdd == true)
                                {
                                    <span class="input-group-append">
                                        <a href="javascript:void(0)" class="btn btn-info" onclick="openTaxModal('InterStateTax')">+ </a>
                                    </span>
                                }
                            </div>
                        </div>
                        <small class="text-red font-weight-bold errorText" id="divInterStateTax_N"></small>
                    </div>
                    <div class="col-sm-6 divNonTaxable_N" style="display:none">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Tax Exemption <span class="danger">*</span></label>
                            <div class="input-group divTaxExemption_N_ctrl">
                                <select class="form-control select2" id="ddlTaxExemption_N">
                                    <option value="0">Select</option>
                                    @foreach (var item in ViewBag.TaxExemptions)
                                    {
                                        <option value="@item.TaxExemptionId">@item.Reason</option>
                                    }
                                </select>
                                @if (ViewBag.TaxExemptionPermission.IsAdd == true)
                                {
                                    <span class="input-group-append">
                                        <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#taxExemptionModal">+ </a>
                                    </span>
                                }
                            </div>
                        </div>
                        <small class="text-red font-weight-bold errorText" id="divTaxExemption_N"></small>
                    </div>
                    <div class="col-sm-12">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Description</label>
                            <textarea type="text" class="form-control" id="txtDescription_N" placeholder="Start typing to search"></textarea>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertItemCode()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="taxExemptionModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Tax Exemption</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Reason <span class="danger">*</span></label>
                            <input type="text" class="form-control divReason_TaxExemption_ctrl" id="txtReason_TaxExemption" placeholder="">
                            <small class="text-red font-weight-bold errorText" id="divReason_TaxExemption"></small>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Description </label>
                            <textarea class="form-control" id="txtDescription_TaxExemption"></textarea>
                        </div>
                    </div>
                    <div class="col-sm-6" style="display:none">
                        <div class="form-group">
                            <label>Type </label>
                            <div class="custom-control custom-radio">
                                <input class="custom-control-input" type="radio" id="rdbCustomer" name="customRadio">
                                <label for="rdbCustomer" class="custom-control-label">Customer</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input class="custom-control-input" type="radio" id="rdbItem" name="customRadio" checked>
                                <label for="rdbItem" class="custom-control-label">Item</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertTaxExemption()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="saltModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Salt</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card-body pb-0">

                    <div class="row">
                        <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                            <div class="form-group">
                                <label>Salt Name <span class="danger">*</span></label>
                                <input type="text" class="form-control divSaltName_ctrl" id="txtSaltName" placeholder="">
                                <small class="text-red font-weight-bold errorText" id="divSaltName"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card card-outline collapsed-card m-3">
                    <div class="card-header bg-info" data-card-widget="collapse" title="Collapse">
                        <h3 class="card-title">More Info</h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Indication</label>
                                    <textarea id="txtIndication"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Dosage</label>
                                    <textarea id="txtDosage"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Side Effects</label>
                                    <textarea id="txtSideEffects"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Special Precautions</label>
                                    <textarea id="txtSpecialPrecautions"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Drug Interactions</label>
                                    <textarea id="txtDrugInteractions"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Notes</label>
                                    <textarea id="txtNotes"></textarea>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                <div class="form-group">
                                    <label>TB Item <span class="danger service">*</span></label>
                                    <div class="input-group">
                                        <select class="form-control select2" id="ddlTBItem">
                                            <option value="Normal">Normal</option>
                                            <option value="Tb">Tb</option>
                                            <option value="Tramadol">Tramadol</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                <div class="form-group">
                                    <div class="checkbox icheck-turquoise">
                                        <input type="checkbox" id="chkIsNarcotic" />
                                        <label for="chkIsNarcotic" class="mt-2">Is Narcotic</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                <div class="form-group">
                                    <div class="checkbox icheck-turquoise">
                                        <input type="checkbox" id="chkIsScheduleH" />
                                        <label for="chkIsScheduleH" class="mt-2">Is ScheduleH</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                <div class="form-group">
                                    <div class="checkbox icheck-turquoise">
                                        <input type="checkbox" id="chkIsScheduleH1" />
                                        <label for="chkIsScheduleH1" class="mt-2">Is ScheduleH1</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                <div class="form-group">
                                    <div class="checkbox icheck-turquoise">
                                        <input type="checkbox" id="chkIsDiscontinued" />
                                        <label for="chkIsDiscontinued" class="mt-2">Is Discontinued</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                <div class="form-group">
                                    <div class="checkbox icheck-turquoise">
                                        <input type="checkbox" id="chkIsProhibited" />
                                        <label for="chkIsProhibited" class="mt-2">Is Prohibited</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertSalt()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="currencyModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Currency</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Currency <span class="danger">*</span></label>
                            <div class="input-group">
                                <select class="form-control select2" id="ddlCurrency" onchange="setCurrencyName()">
                                    <option value="0">Select Currency</option>
                                    @foreach (var item in ViewBag.AllCurrencys)
                                    {
                                        <option value="@item.CurrencyId">@item.CurrencyName (@item.CurrencyCode) </option>
                                    }
                                </select>
                            </div>
                            <small class="text-red font-weight-bold errorText" id="divCurrency"></small>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Exchange Rate</label>
                            <div class="input-group">
                                <span class="input-group-append">
                                    <a href="javascript:void(0)" class="btn bg-gray">1 @ViewBag.Currency.CurrencyCode = </a>
                                </span>
                                <input type="number" class="form-control" id="txtExchangeRate" placeholder="Conversion Rate"
                                       onkeypress="return onlyDecimalKey(event)">
                                <span class="input-group-append">
                                    <a href="javascript:void(0)" class="btn bg-gray " id="txtCurrency"> </a>
                                </span>
                            </div>
                            <small class="text-red font-weight-bold errorText" id="divExchangeRate"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="insertCurrency()">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="exemptionModal">
    <div class="modal-dialog modal-l">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Exemption Reason</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>Exemption Reason <span class="danger">*</span></label>
                            <div class="input-group">
                                <select class="form-control select2 ddlExemptionReason_ctrl" id="ddlExemptionReason">
                                </select>
                                @*@if (ViewBag.CustomersPermission.IsAdd == true)
                                    {
                                        <span class="input-group-append">
                                            <a href="javascript:void(0)" class="btn btn-info" onclick="openCustomerModal()">+ </a>
                                        </span>
                                    }*@

                            </div>
                            <small class="text-red font-weight-bold errorText" id="divExemptionReason"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="saveExemptionSelection()">Save Changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="itcModal">
    <div class="modal-dialog modal-l">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Input Tax Credit Type</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-6">
                        <!-- text input -->
                        <div class="form-group">
                            <label>ITC Type <span class="danger">*</span></label>
                            <div class="input-group">
                                <select class="form-control select2 ddlITCType_ctrl" id="ddlITCType">
                                </select>
                            </div>
                            <small class="text-red font-weight-bold errorText" id="divITCType"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
                <button type="button" class="btn btn-primary" onclick="saveITCSelection()">Save Changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<script>
    // Initialize autocomplete for HSN/SAC Code
    $('#txtCode_N').autocomplete({
        minLength: 2,
        source: function (request, response) {
            $.ajax({
                url: "/othersettings/ItemCodeAutocomplete",
                dataType: "json",
                type: "POST",
                data: {
                    Search: request.term,
                    ItemCodeType: $('#ddlItemCodeType_N').val()
                },
                success: function (data) {
                    if (data.Status == 0) {
                        if (EnableSound == 'True') { document.getElementById('error').play(); }
                        toastr.error(data.Message);
                    }
                    else if (data.Status == 2) {
                        if (EnableSound == 'True') { document.getElementById('error').play(); }
                        toastr.error('Invalid inputs, check and try again !!');
                        data.Errors.forEach(function (res) {
                            $('#' + res.Id).show();
                            $('#' + res.Id).text(res.Message);
                        });
                    }
                    else {
                        response(data.Data.ItemsArray);
                    }
                },
                error: function (xhr) {
                    // Handle error silently
                }
            });
        },
        select: function (event, ui) {
            var selectedValue = ui.item.value;
            var parts = selectedValue.split(' ~ ');
            if (parts.length === 2) {
                $('#txtCode_N').val(parts[0]);
                $('#txtDescription_N').val(parts[1]);
            }
            return false;
        }
    });

    // Initialize autocomplete for Description
    $('#txtDescription_N').autocomplete({
        minLength: 2,
        source: function (request, response) {
            $.ajax({
                url: "/othersettings/ItemCodeAutocomplete",
                dataType: "json",
                type: "POST",
                data: {
                    Search: request.term,
                    ItemCodeType: $('#ddlItemCodeType_N').val()
                },
                success: function (data) {
                    if (data.Status == 0) {
                        if (EnableSound == 'True') { document.getElementById('error').play(); }
                        toastr.error(data.Message);
                    }
                    else if (data.Status == 2) {
                        if (EnableSound == 'True') { document.getElementById('error').play(); }
                        toastr.error('Invalid inputs, check and try again !!');
                        data.Errors.forEach(function (res) {
                            $('#' + res.Id).show();
                            $('#' + res.Id).text(res.Message);
                        });
                    }
                    else {
                        response(data.Data.ItemsArray);
                    }
                },
                error: function (xhr) {
                    // Handle error silently
                }
            });
        },
        select: function (event, ui) {
            var selectedValue = ui.item.value;
            var parts = selectedValue.split(' ~ ');
            if (parts.length === 2) {
                $('#txtCode_N').val(parts[0]);
                $('#txtDescription_N').val(parts[1]);
            }
            return false;
        }
    });
</script>