
<div class="paymentAdd hide">
    @if (ViewBag.User != null)
    {
        <div class="row @(ViewBag.Title == "customer payment"?"":"hidden")">
            <div class="col-sm-12">
                <div class="">
                    <label>Total Sales: </label>
                    <span id="txtTotalSales" class="">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.TotalSales
                            }
                            else
                            {
                                @ViewBag.User.TotalSales@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
        <div class="row @(ViewBag.Title == "customer payment"?"":"hidden")">
            <div class="col-sm-12">
                <div class="">
                    <label>Total Sales Paid: </label>
                    <span id="txtTotalSalesPaid" class="text-green">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.TotalSalesPaid
                            }
                            else
                            {
                                @ViewBag.User.TotalSalesPaid@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
        <div class="row @(ViewBag.Title == "customer payment"?"":"hidden")">
            <div class="col-sm-6">
                <div class="">
                    <label>Total Sales Due: </label>
                    <span id="txtTotalSalesDue" class="text-danger">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.TotalSalesDue
                            }
                            else
                            {
                                @ViewBag.User.TotalSalesDue@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
        <div class="row @(ViewBag.Title == "customer payment"?"":"hidden")">
            <div class="col-sm-6">
                <div class="">
                    <label>Opening Balance: </label>
                    <span id="txtOpeningBalance">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.OpeningBalance
                            }
                            else
                            {
                                @ViewBag.User.OpeningBalance@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
        <div class="row @(ViewBag.Title == "customer payment"?"":"hidden")">
            <div class="col-sm-6">
                <div class="">
                    <label>Opening Balance Due: </label>
                    <span id="txtOpeningBalanceDue" class="text-danger">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.OpeningBalanceDue
                            }
                            else
                            {
                                @ViewBag.User.OpeningBalanceDue@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>

        <div class="row @(ViewBag.Title == "customer payment"?"hidden":"")">
            <div class="col-sm-12">
                <div class="">
                    <label>Total Sales Return: </label>
                    <span id="txtTotalSales" class="">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.TotalSales
                            }
                            else
                            {
                                @ViewBag.User.TotalSales@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
        <div class="row @(ViewBag.Title == "customer payment"?"hidden":"")">
            <div class="col-sm-12">
                <div class="">
                    <label>Total Customer Refund: </label>
                    <span id="txtTotalSalesPaid" class="text-green">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.TotalSalesPaid
                            }
                            else
                            {
                                @ViewBag.User.TotalSalesPaid@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
        <div class="row @(ViewBag.Title == "customer payment"?"hidden":"")">
            <div class="col-sm-6">
                <div class="">
                    <label>Total Sales Return Due: </label>
                    <span id="txtTotalSalesDue" class="text-danger">
                        @{
                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@ViewBag.User.TotalSalesDue
                            }
                            else
                            {
                                @ViewBag.User.TotalSalesDue@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        }
                    </span>
                </div>
            </div>
        </div>
    }

    <hr />
    <div class="row">
        @*<div class="col-sm-3">
                <div class="form-group">
                    <label>Advance Balance</label>
                    <input type="number" class="form-control" id="txtAdvBalance" disabled>
                </div>
            </div>*@
        <div class="col-sm-4">
            <!-- text input -->
            <div class="form-group">
                <label>Amount <span class="danger">*</span></label>
                <input type="number" class="form-control" id="txtAmount" onkeypress="return onlyDecimalKey(event)">
                <small class="text-red font-weight-bold errorText" id="divAmount_M"></small>
            </div>
        </div>
        <div class="col-sm-4">
            <!-- text input -->
            <div class="form-group">
                <label>Paid On <span class="danger">*</span></label>
                <div class="input-group date" id="_PaymentDate" data-target-input="nearest">
                    <input id="txtPaymentDate" type="text" class="form-control datetimepicker-input" data-target="#_PaymentDate" />
                    <div class="input-group-append" data-target="#_PaymentDate" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
                @*<input type="datetime-local" class="form-control" id="txtPaymentDate">*@
                <small class="text-red font-weight-bold errorText" id="divPaymentDate_M"></small>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="form-group">
                <label>Payment Method <span class="danger">*</span></label>
                <select class="form-control select2" style="width: 100%;" id="ddlPaymentType">
                    <option value="0">Select</option>
                    @{
                        if (ViewBag.PaymentTypes != null)
                        {
                            foreach (var item in ViewBag.PaymentTypes)
                            {
                                if (item.IsDefault == true)
                                {
                                    <option value="@item.PaymentTypeId" selected>@item.PaymentType</option>
                                }
                                else
                                {
                                    <option value="@item.PaymentTypeId">@item.PaymentType</option>
                                }
                            }
                        }
                    }
                </select>
                <small class="text-red font-weight-bold errorText" id="divPaymentType_M"></small>
            </div>
        </div>

        @*@if (ViewBag.IsAccounts == true)
            {*@
    <div class="col-sm-4 @(ViewBag.IsAccountsAddon == true ? "" : "hidden")">
        <!-- text input -->
        <div class="form-group">
            <label>Account</label>
            <div class="input-group">
                <select class="form-control select2" id="ddlLAccount">
                    @*<option value="0">Select</option>*@
                    @{
                        if (ViewBag.AccountSubTypes != null)
                        {
                            foreach (var item in ViewBag.AccountSubTypes)
                            {
                                if (item.Accounts.Count > 0)
                                {
                                    <optgroup label="@item.DisplayAs">
                                        @foreach (var inner in item.Accounts)
                                        {
                                            if (inner.Type == "Petty Cash")
                                            {
                                                <option value="@inner.AccountId" selected>@inner.DisplayAs</option>
                                            }
                                            else
                                            {
                                                <option value="@inner.AccountId">@inner.DisplayAs</option>
                                            }
                                        }
                                    </optgroup>
                                }
                            }
                        }
                    }
                </select>
                @*<span class="input-group-append">
                    <a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" data-target="#AccountModal">+ </a>
                </span>*@
            </div>
        </div>
    </div>
        @*}*@
       
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Attach Document</label>
                    <div class="custom-file">
                        <input type="file" id="PaymentAttachDocument" class="custom-file-input" accept='image/*' onchange="getPaymentAttachDocumentBase64()">
                        <label class="custom-file-label" for="Logo">Choose file</label>
                    </div>
                    <img id="blahPaymentAttachDocument" alt="" height="60" style="padding-top:10px;">
                </div>
            </div>
        <div class="col-sm-4">
            <!-- text input -->
            <div class="form-group">
                <label>Reference No <i tabindex="0" class="fa fa-info-circle text-info hover-q no-print @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Leave blank to auto generate"></i></label>
                <input type="text" class="form-control" id="txtMReferenceNo" />
            </div>
        </div>
        <div class="col-sm-4">
            <!-- text input -->
            <div class="form-group">
                <label>Notes</label>
                @*<input type="text" class="form-control" id="txtPaymentNotes" />*@
                <textarea rows="2" class="form-control" id="txtPaymentNotes" placeholder="Enter Notes"></textarea>
            </div>
        </div>
    </div>
</div>

@*<div class="paymentList hide">
        @if (ViewBag.CustomerPaymentPermission.IsExport)
        {
            <div class="dt-buttons btn-group flex-wrap noPrint mb-2">
                <button class="btn btn-secondary buttons-csv buttons-html5 mr-2" tabindex="0" aria-controls="tblUserRole" type="button" onclick="exportToCsvPayments()"><span>CSV</span></button>
                <button class="btn btn-secondary buttons-excel buttons-html5 mr-2" tabindex="0" aria-controls="tblUserRole" type="button" onclick="exportToExcelPayments()"><span>Excel</span></button>
                <button class="btn btn-secondary buttons-pdf buttons-html5 mr-2" tabindex="0" aria-controls="tblUserRole" type="button" onclick="exportToPdfPayments()"><span>PDF</span></button>
                <button class="btn btn-secondary buttons-print mr-2 mt-2 mt-sm-0" tabindex="0" aria-controls="tblUserRole" type="button" onclick="printDivPayments()"><span>Print</span></button>
            </div>
        }
        <div class="table-responsive">
            <table id="tblPayments" class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Paid On</th>
                        <th>Reference No</th>
                        <th>Amount</th>
                        <th>Payment Method</th>
                        <th>Added By</th>
                        <th>Added On</th>
                        @if (ViewBag.CustomerPaymentPermission.IsDelete)
                        {
                            <th>Action</th>
                        }
                    </tr>
                </thead>
                <tbody id="order_item_table" class="rows">
                    @{
                        if (ViewBag.UserPayments != null)
                        {
                            var index = 1;
                            foreach (var item in ViewBag.UserPayments)
                            {
                                <tr id="tr_@(item.UserPaymentId)">
                                    <td>@index</td>
                                    <td>
                                        @item.PaymentDate.ToString(Request.Cookies["BusinessSetting"].Value.Split('&')[0].Split('=')[1] + " " + Request.Cookies["BusinessSetting"].Value.Split('&')[1].Split('=')[1])
                                    </td>
                                    <td>
                                        @item.ReferenceNo
                                    </td>
                                    <td>
                                        @{
                                            if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                                            {
                                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@item.Amount
                                            }
                                            else
                                            {
                                                @item.Amount@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                                            }
                                        }
                                    </td>
                                    <td>
                                        @item.PaymentType
                                    </td>
                                    <td>@item.AddedByCode</td>
                                    <td>@item.AddedOn.ToString(Request.Cookies["BusinessSetting"].Value.Split('&')[0].Split('=')[1] + " " + Request.Cookies["BusinessSetting"].Value.Split('&')[1].Split('=')[1])</td>

                                    <td>
                                        @if (ViewBag.CustomerPaymentPermission.IsDelete)
                                        {
                                            <a href="javascript:void(0)" onclick="deletePayment(@item.UserPaymentId)" class="btn btn-danger btn-sm" id="Delete" data-toggle="tooltip" data-placement="bottom" title="Delete"><i class="far fa-trash-alt"></i></a>
                                            <a href="javascript:void(0)" onclick="ViewPayment(@item.UserPaymentId)" class="btn btn-primary btn-sm" id="View" data-toggle="tooltip" data-placement="bottom" title="View"><i class="far fa-eye"></i></a>
                                        }
                                        @if (ViewBag.Type == "customer payment")
                                        {
                                            <a href="javascript:void(0)" onclick="PrintInvoice('@ViewBag.InvoiceUrl/customers/PaymentReceivedReceipt?ReferenceId=@item.ReferenceId')" class="btn btn-info btn-sm" id="View" data-toggle="tooltip" data-placement="bottom" title="Print"><i class="fas fa-file"></i></a>
                                            <a href="javascript:void(0)" onclick="copyCode('@ViewBag.InvoiceUrl/customers/PaymentReceivedReceipt?ReferenceId=@item.ReferenceId')" class="btn btn-secondary btn-sm" id="View" data-toggle="tooltip" data-placement="bottom" title="Copy"><i class="fas fa-copy"></i></a>
                                        }
                                        else
                                        {
                                            <a href="javascript:void(0)" onclick="PrintInvoice('@ViewBag.InvoiceUrl/customers/PaymentPaidReceipt?ReferenceId=@item.ReferenceId')" class="btn btn-info btn-sm" id="View" data-toggle="tooltip" data-placement="bottom" title="Print"><i class="fas fa-file"></i></a>
                                            <a href="javascript:void(0)" onclick="copyCode('@ViewBag.InvoiceUrl/customers/PaymentPaidReceipt?ReferenceId=@item.ReferenceId')" class="btn btn-secondary btn-sm" id="View" data-toggle="tooltip" data-placement="bottom" title="Copy"><i class="fas fa-copy"></i></a>
                                        }
                                    </td>
                                </tr>
                                index++;
                            }
                        }
                    }
                </tbody>

            </table>
        </div>
    </div>*@
