
<div id="divNewDomain" style="display:@(ViewBag.Domains.Count==0 ? "block":"none" )">
    <h5>Connect Existing Domain</h5>
    <div class="row card-body">
        <div class="col-sm-4">
            <!-- text input -->
            <div class="form-group">
                <label>Domain</label>
                <div class="input-group">
                    <span class="input-group-append">
                        <a href="javascript:void(0)" class="btn bg-gray-light"> https://</a>
                    </span>
                    <input type="text" class="form-control" id="txtDomain" placeholder="">
                </div>
                <small>Enter the domain you want to connect</small><br />
                <small class="text-red font-weight-bold errorText" id="divDomain"></small>
            </div>
        </div>
    </div>
    <div class="card-footer">
        <button type="submit" class="btn btn-primary float-right" onclick="insert()">Next</button>
        @if (ViewBag.Domains.Count != 0)
        {
            <a id="btnBack" href="javascript:void(0)" onclick="back()" class="btn btn-warning float-sm-right mr-2"><i class="fas fa-arrow-left"></i> Back</a>
        }
    </div>
</div>

<div id="divVerifyDomain" style="display:none">

    <div class="alert alert-warning alert-dismissible" id="divErrorMsg" style="display:none">
        <button type="button" class="close" onclick="closeErrorMsg()">×</button>
        <h5><i class="icon fas fa-exclamation-triangle"></i> Connection Incomplete!</h5>
        Some providers may take few minutes to update their settings. Try verifying again or leave it the way it is now
        and check back later for connection updates
        <hr />
        <div class="form-group">
            <label style="width:100%">A Record</label>
            <p class="mb-0"> Current IP Address: <span id="divCurrentIp" class="font-weight-bold"> </span> </p>
            <p> Required IP Address: <span class="font-weight-bold"> 108.181.191.157 </span><a href="javascript:void(0)" class="btn btn-primary text-decoration-none" onclick="copyCode('103.171.180.90')">Copy</a></p>
        </div>
    </div>
    <h5>Connecting your domain</h5>
    <div class="row card-body">
        <div class="col-sm-4">
            <div class="form-group">
                <label style="width:100%">Domain <a class="float-right font-weight-normal" onclick="next(1)">Edit</a></label>
                <p id="lblDomain"> </p>
            </div>
        </div>
    </div>
    <hr />
    <div class="row card-body">
        <div class="form-group">
            <p>
                To connect your domain, you need to login to your provider account and change your settings.
                Follow the provider step by step instructions to get started.
            </p>
            <a class="btn btn-default" data-toggle="modal" data-target="#viewInstructionModal">View Instructions</a>
        </div>
    </div>
    <!-- /.card-body -->
    <div class="card-footer">
        <p>
            Verify the connection to make sure your connection is set up correctly
            <button type="submit" class="btn btn-primary float-right" onclick="VerifyDomainConnection()">Verify Connection</button>
            @if (ViewBag.Domains.Count != 0)
            {
                <a id="btnBack" href="javascript:void(0)" onclick="back()" class="btn btn-warning float-sm-right mr-2"><i class="fas fa-arrow-left"></i> Back</a>
            }
        </p>
    </div>
</div>

<div id="divConnectedDomains" style="display:@(ViewBag.Domains.Count!=0 ? "block":"none" )">
    <div class="alert alert-success alert-dismissible" id="divSuccessMsg" style="display:none">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <h5><i class="icon fas fa-check"></i> Connection Complete!</h5>
        Your Domain is now pointing correctly to @Request.Cookies["adata"].Value.Split('&')[9].Split('=')[1]'s IP Address. It can take upto 24 hours to propagate
    </div>
    <h5>Connected Domains</h5>
    <div class="col-sm-12 table-responsive">
        <table id="tblData" class="table">
            <thead id="thead">
                <tr>
                    <th>Domain Name</th>
                    <th>Status</th>
                    <th>Added By</th>
                    <th>Added On</th>
                    <th></th>
                </tr>
            </thead>
            <tbody class="table-body">
                @foreach (var item in ViewBag.Domains)
                {
                    <tr>
                        <td>@item.Domain</td>
                        <td>
                            @if (item.Status == 1)
                            {
                                <span class="text-red font-weight-bold">Not Connected</span>
                            }
                            else
                            {
                                <span class="text-green font-weight-bold">Connected</span>
                            }
                        </td>
                        <td>@item.AddedByCode</td>
                        <td>@item.AddedOn.ToString(Request.Cookies["aBusinessSetting"].Value.Split('&')[0].Split('=')[1] + " " + Request.Cookies["aBusinessSetting"].Value.Split('&')[1].Split('=')[1])</td>
                        <td>
                            @if (item.Status == 1)
                            {
                                <a href="javascript:void(0)" onclick="checkConnection(@item.DomainId,'@item.Domain')" class="btn btn-primary btn-sm" id="Edit" data-placement="bottom" title="View"> Check Connection</a>
                            }

                            <a href="javascript:void(0)" onclick="Delete(@item.DomainId,'@Html.Raw(HttpUtility.JavaScriptStringEncode(item.Domain))')" class="btn btn-danger btn-sm" id="" data-placement="bottom" title="View"> Remove</a>
                        </td>
                    </tr>
                }


            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="viewInstructionModal">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">View Instructions</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <label> Add an A record</label>
                        <div>1. Sign in to your Provider's Domain Control Center</div>
                        <div>2. Select your domain to access the Domain Settings page</div>
                        <div>3. Select Manage DNS to access your zone file</div>
                        <div>4. Select Add to add a new record or edit an existing A record</div>
                        <div>
                            5. Enter the details for your A record <br />
                            <ul>
                                <li>Type: A</li>
                                <li>
                                    Name: @@
                                </li>
                                <li>Value: <span class="font-weight-bold"> 108.181.191.157</span></li>
                            </ul>
                        </div>
                        <div>6. Select Add Record to save your new A record.</div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>