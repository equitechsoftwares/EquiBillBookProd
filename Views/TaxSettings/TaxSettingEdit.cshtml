
@{
    ViewBag.Title = Request.Cookies["data"].Value.Split('&')[8].Split('=')[1] + " | Edit Tax Setting";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>Edit Tax Setting</h1>
                <div class="float-left">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="/dashboard/index">Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="/settings/index">Settings</a></li>
                        <li class="breadcrumb-item"><a href="/taxsettings/TaxSettings">Tax Setting List</a></li>
                        <li class="breadcrumb-item active">Edit Tax Setting</li>
                    </ol>
                </div>
            </div>
            <div class="col-md-6 col-12 d-flex align-items-center justify-content-start justify-content-md-end mt-1 mt-md-0">
                <a id="btnBack" href="/taxsettings/TaxSettings" class="btn btn-warning float-sm-right"><i class="fas fa-arrow-left"></i> Back</a>
                @*<a href="javascript:void(0)" data-toggle="modal" data-target="#faqModal" class="btn btn-secondary float-sm-right mr-2">FAQs</a>*@
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>
<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <div class="row">
            <!-- left column -->
            <div class="col-md-12">
                <div class="callout callout-info @(Request.Cookies["SystemSetting"].Value.Split('&')[0].Split('=')[1] == "True" ? "":"hidden")">
                    @*<h5><i class="fas fa-info"></i> Note:</h5>*@
                    Only the fields which are marked with <span class="text-danger">*</span> is mandatory. Rest all fields are optional and can be skipped
                    @*<button class="btn btn-info btn-sm" onclick="insert()"> Check Mandatory Fields</button>*@
                </div>
                <!-- jquery validation -->
                <div class="card card-primary card-outline">

                    <!-- form start -->
                    <div id="quickForm">
                        <div class="card-body">

                            <div class="row">
                                @if (ViewBag.BusinessRegistrationNames.Count == 1)
                                {
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2" style="display:none">
                                        <div class="form-group">
                                            <label>Business Registration Name <span class="danger">*</span></label>
                                            <div class="input-group divBusinessRegistrationName_ctrl">
                                                <select class="form-control select2" id="ddlBusinessRegistrationName">
                                                    @foreach (var item in ViewBag.BusinessRegistrationNames)
                                                    {
                                                        <option value="@item.BusinessRegistrationNameId">@item.Name</option>
                                                    }
                                                </select>
                                            </div>
                                            <small class="text-red font-weight-bold errorText" id="divBusinessRegistrationName"></small>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                        <div class="form-group">
                                            <label>@ViewBag.BusinessRegistrationNames[0].Name <span class="danger">*</span></label>
                                            <input type="text" class="form-control divBusinessRegistrationNo_ctrl" id="txtBusinessRegistrationNo" value="@ViewBag.TaxSetting.BusinessRegistrationNo">
                                            <small class="text-red font-weight-bold errorText" id="divBusinessRegistrationNo"></small>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                        <div class="form-group">
                                            <label>Business Registration Name <span class="danger">*</span></label>
                                            <div class="input-group divBusinessRegistrationName_ctrl">
                                                <select class="form-control select2" id="ddlBusinessRegistrationName" disabled>
                                                    @foreach (var item in ViewBag.BusinessRegistrationNames)
                                                    {
                                                        if (ViewBag.TaxSetting.BusinessRegistrationNameId == item.BusinessRegistrationNameId)
                                                        {
                                                            <option value="@item.BusinessRegistrationNameId" selected>@item.Name</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@item.BusinessRegistrationNameId">@item.Name</option>
                                                        }
                                                    }
                                                </select>
                                            </div>
                                            <small class="text-red font-weight-bold errorText" id="divBusinessRegistrationName"></small>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                        <div class="form-group">
                                            <label class="lblBusinessRegistrationName">@ViewBag.BusinessRegistrationNames[0].Name <span class="danger">*</span></label>
                                            <input type="text" class="form-control divBusinessRegistrationNo_ctrl" id="txtBusinessRegistrationNo" placeholder="">
                                            <small class="text-red font-weight-bold errorText" id="divBusinessRegistrationNo"></small>
                                        </div>
                                    </div>
                                }

                                @if (ViewBag.BusinessSetting.CountryId == 2)
                                {
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                        <div class="form-group">
                                            <label>Business Legal Name</label>
                                            <input type="text" class="form-control" id="txtBusinessLegalName" value="@ViewBag.TaxSetting.BusinessLegalName">
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                        <div class="form-group">
                                            <label>Business Trade Name</label>
                                            <input type="text" class="form-control" id="txtBusinessTradeName" value="@ViewBag.TaxSetting.BusinessTradeName">
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label>Registered On</label>
                                            <div class="input-group date" id="_RegisteredOn" data-target-input="nearest">
                                                <input id="txtRegisteredOn" value="@(ViewBag.TaxSetting.RegisteredOn != null?ViewBag.TaxSetting.RegisteredOn.ToString(Request.Cookies["BusinessSetting"].Value.Split('&')[0].Split('=')[1]):"")" type="text" class="form-control datetimepicker-input" data-target="#_RegisteredOn" />
                                                <div class="input-group-append" data-target="#_RegisteredOn" data-toggle="datetimepicker">
                                                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 hidden">
                                            <div class="form-group">
                                                <div class="checkbox icheck-turquoise">
                                                    @{
                                                        if (ViewBag.BusinessSetting.BusinessRegistrationType == "Composition")
                                                        {
                                                            <input type="checkbox" id="chkIsCompositionScheme" onchange="toggleIsComposition()" checked>
                                                        }
                                                        else
                                                        {
                                                            <input type="checkbox" id="chkIsCompositionScheme" onchange="toggleIsComposition()">
                                                        }
                                                    }
                                                    <label for="chkIsCompositionScheme" class="mt-2">
                                                        My Business is registered for Composition Scheme
                                                    </label>
                                                </div>
                                            </div>
                                        </div>*@
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 divIsComposition" style="display:@(ViewBag.BusinessSetting.BusinessRegistrationType == "Composition" ? "" : "none")">
                                        <!-- text input -->
                                        <div class="form-group">
                                            <label>Composition Scheme (%) <span class="danger">*</span></label>
                                            <div class="input-group divCompositionSchemeTax_ctrl">
                                                <select class="form-control select2" id="ddlCompositionSchemeTax">
                                                    <option value="0">Select</option>
                                                    @foreach (var item in ViewBag.Taxs)
                                                    {
                                                        if (item.CanDelete == true)
                                                        {
                                                            if (item.TaxTypeId != 3)
                                                            {
                                                                if (ViewBag.TaxSetting.CompositionSchemeTaxId == item.TaxId)
                                                                {
                                                                    <option value="@item.TaxId" selected>@item.Tax</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@item.TaxId">@item.Tax</option>
                                                                }
                                                            }
                                                        }
                                                    }
                                                </select>
                                            </div>
                                            <small class="text-red font-weight-bold errorText" id="divCompositionSchemeTax"></small>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2" style="display:@(ViewBag.BusinessSetting.BusinessRegistrationType == "Composition" ? "none" : "")">
                                        <div class="form-group">
                                            <div class="checkbox icheck-turquoise">
                                                @{
                                                    if (ViewBag.TaxSetting.AllowSalesReverseCharge == true)
                                                    {
                                                        if (ViewBag.BusinessSetting.BusinessRegistrationType == "Composition")
                                                        {
                                                            <input type="checkbox" id="chkAllowSalesReverseCharge">
                                                        }
                                                        else
                                                        {
                                                            <input type="checkbox" id="chkAllowSalesReverseCharge" checked>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <input type="checkbox" id="chkAllowSalesReverseCharge" onchange="toggleIsComposition()">
                                                    }
                                                }
                                                <label for="chkAllowSalesReverseCharge">
                                                    Enable Reverse Charge in Sales
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                }
                            </div>

                        </div>
                        <!-- /.card-body -->
                        <div class="card-footer">
                            <button id="btnUpdate" type="submit" class="btn btn-primary float-right" onclick="update(1)"><i class="fas fa-edit"></i> Update</button>
                            <button id="btnUpdate_AddAnother" type="submit" class="btn btn-success float-right mr-2" onclick="update(2)"><i class="fas fa-plus-circle"></i> Update & Add Another</button>
                            @*<a id="btnBack" href="/items/brand" class="btn btn-warning float-sm-right mr-2"><i class="fas fa-arrow-left"></i> Back</a>*@
                        </div>
                    </div>
                </div>
                <!-- /.card -->
            </div>
            <!--/.col (left) -->

        </div>
        <!-- /.row -->
    </div><!-- /.container-fluid -->
</section>
<!-- /.content -->
<div class="modal fade" id="faqModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">FAQs</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="p-0 pl-2 pr-2">
                            <div class="card collapsed-card" data-card-widget="collapse" title="Collapse">
                                <div class="card-header" data-card-widget="collapse" title="Collapse">
                                    <h3 class="card-title">How do I add and update product brands?</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" style="display: none;">
                                    •	To add a new product brand, click on the ‘Add New’ button at the top of the screen
                                    •	To update an existing product brand, click on 'Edit' button beside the name of product brand you want to change, make your changes and then click the ‘Save’ button at the bottom of the screen.
                                    •	To delete an existing product category, tick the box that is to the left of the product brand you would like to delete and then click the ‘Delete’ button at the top of the list.
                                </div>
                            </div>
                            <div class="card collapsed-card" data-card-widget="collapse" title="Collapse">
                                <div class="card-header" data-card-widget="collapse" title="Collapse">
                                    <h3 class="card-title">How do I make a product brand inactive?</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" style="display: none;">
                                    IMS allows you stop an entire product brand from displaying in your catalogue, by marking it as inactive. This is sometimes better than deleting all those products since all the product information is retained but the products are not shown in the catalogue. To mark a product brand as inactive, follow these steps:

                                    •	Click on the name of the product category that you want to make active.
                                    •	Change the status field from ‘Active’ to ‘Inactive’.
                                    •	Click the ‘Save’ button at the bottom of the page.
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-left:auto">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<script src="~/Content/JQuery/Customer/Settings/TaxSettings/TaxSetting.js"></script>