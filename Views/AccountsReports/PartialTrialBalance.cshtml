



@{
    decimal TotalDebit = 0, TotalCredit = 0;
    <thead id="thead">
        <tr>
            @*<th>Sln</th>*@
            <th>Account</th>
            <th>Account Code</th>
            <th>Net Debit</th>
            <th>Net Credit</th>
        </tr>
    </thead>
    <tbody class="table-body">
        
        @foreach (var accountType in ViewBag.AccountTypes)
        {
            <tr class="bg-secondary">
                @*<td>@(ViewBag.PageSize * (ViewBag.PageIndex - 1) + count)</td>*@
                <td class="text-bold" colspan="4">@accountType.AccountType</td>
            </tr>
            foreach (var item in accountType.Accounts)
            {
                if (item.Debit > 0 || item.Credit > 0)
                {
                    <tr>
                        @*<td>@(ViewBag.PageSize * (ViewBag.PageIndex - 1) + count)</td>*@
                        <td>@item.AccountName</td>
                        <td>@item.AccountNumber</td>
                        <td>
                            @{
                                if (item.Debit > item.Credit)
                                {
                                    <a href="/accountsreports/AccountTransactions?AccountId=@item.AccountId&AccountName=@item.AccountName&BranchId=@ViewBag.BranchId&FromDate=@ViewBag.FromDate.ToString("MM-dd-yyyy")&ToDate=@ViewBag.ToDate.ToString("MM-dd-yyyy")&Page=trial balance">
                                        @(String.Format("{0:0.##}", item.Debit - item.Credit))
                                    </a>

                                    TotalDebit = TotalDebit + (item.Debit - item.Credit);
                                }
                                else
                                {
                                    <a href="/accountsreports/AccountTransactions?AccountId=@item.AccountId&AccountName=@item.AccountName&BranchId=@ViewBag.BranchId&FromDate=@ViewBag.FromDate.ToString("MM-dd-yyyy")&ToDate=@ViewBag.ToDate.ToString("MM-dd-yyyy")&Page=trial balance">
                                        0
                                    </a>
                                }
                            }
                        </td>
                        <td>
                            @{
                                if (item.Credit > item.Debit)
                                {
                                    <a href="/accountsreports/AccountTransactions?AccountId=@item.AccountId&AccountName=@item.AccountName&BranchId=@ViewBag.BranchId&FromDate=@ViewBag.FromDate.ToString("MM-dd-yyyy")&ToDate=@ViewBag.ToDate.ToString("MM-dd-yyyy")&Page=trial balance">
                                        @(String.Format("{0:0.##}", item.Credit - item.Debit))
                                    </a>
                                    TotalCredit = TotalCredit + (item.Credit - item.Debit);
                                }
                                else
                                {
                                    <a href="/accountsreports/AccountTransactions?AccountId=@item.AccountId&AccountName=@item.AccountName&BranchId=@ViewBag.BranchId&FromDate=@ViewBag.FromDate.ToString("MM-dd-yyyy")&ToDate=@ViewBag.ToDate.ToString("MM-dd-yyyy")&Page=trial balance">
                                        0
                                    </a>
                                }
                            }
                        </td>
                    </tr>
                }
            }
        }
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2" class="text-bold">Total</td>
            <td class="text-bold">@String.Format("{0:0.##}", TotalDebit) </td>
            <td class="text-bold">@String.Format("{0:0.##}", TotalCredit)</td>
        </tr>
        
    </tfoot>
}
<script type="text/javascript">
    $('#divAsof').text('Showing Results: (As of: ' + @Html.Raw(Json.Encode(ViewBag.ToDate.ToString(Request.Cookies["BusinessSetting"].Value.Split('&')[0].Split('=')[1])))+')');
    @*$('#divTotalCount').text('Total : '+@Html.Raw(Json.Encode(ViewBag.TotalCount)));
    $('#divActiveCount').text('Active : '+@Html.Raw(Json.Encode(ViewBag.ActiveCount)));
    $('#divInactiveCount').text('In-Active : '+@Html.Raw(Json.Encode(ViewBag.InactiveCount)));*@
</script>