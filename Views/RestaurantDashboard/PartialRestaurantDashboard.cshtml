<div class="container-fluid">
    @if (ViewBag.BookingStats == null)
    {
        <div id="divNoBranchSelected" class="alert alert-info text-center" style="display: none;">
            <h4><i class="icon fas fa-info"></i> Please select a branch to view restaurant dashboard</h4>
        </div>
        <div id="divDashboardContent" style="display: none;">
            <!-- Empty content when no branch selected -->
        </div>
    }
    else
    {
        <div id="divDashboardContent">
            <!-- Statistics Row 1: Bookings -->
            <div class="row">
            <div class="col-lg-3 col-6">
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3 id="totalTodayBookings">@(ViewBag.BookingStats?.TotalTodayBookings ?? 0)</h3>
                        <p>Today's Bookings</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <a href="/bookingreports/bookingsummary?date=today&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-warning">
                    <div class="inner">
                        <h3 id="pendingBookings">@(ViewBag.BookingStats?.PendingBookings ?? 0)</h3>
                        <p>Pending Bookings</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <a href="/bookingreports/bookingsummary?status=Pending&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3 id="activeBookings">@(ViewBag.BookingStats?.ActiveBookings ?? 0)</h3>
                        <p>Active Bookings</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <a href="/bookingreports/bookingsummary?status=Confirmed&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gradient-green">
                    <div class="inner">
                        <h3 id="completedBookings">@(ViewBag.BookingStats?.CompletedBookings ?? 0)</h3>
                        <p>Completed Bookings</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-check-double"></i>
                    </div>
                    <a href="/bookingreports/bookingsummary?status=Completed&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Statistics Row 2: KOTs and Tables -->
        <div class="row">
            <div class="col-lg-3 col-6">
                <div class="small-box bg-danger">
                    <div class="inner">
                        <h3 id="totalTodayKots">@(ViewBag.KotStats?.TotalTodayKots ?? 0)</h3>
                        <p>Today's KOTs</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-receipt"></i>
                    </div>
                    <a href="/kotreports/kotsummary?date=today&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-orange">
                    <div class="inner">
                        <h3 id="pendingKots">@(ViewBag.KotStats?.PendingKots ?? 0)</h3>
                        <p>Pending KOTs</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <a href="/kotreports/kotsummary?status=Pending&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gradient-cyan">
                    <div class="inner">
                        <h3 id="availableTables">@(ViewBag.TableStats?.AvailableTables ?? 0)</h3>
                        <p>Available Tables</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-table"></i>
                    </div>
                    <a href="/restauranttable/index?filter=available&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gradient-purple">
                    <div class="inner">
                        <h3 id="totalTables">@(ViewBag.TableStats?.TotalTables ?? 0)</h3>
                        <p>Total Tables</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <a href="/restauranttable/index?filter=all&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Statistics Row 3: Additional Metrics -->
        <div class="row">
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gradient-teal">
                    <div class="inner">
                        <h3 id="upcomingBookings">@(ViewBag.BookingStats?.UpcomingBookings ?? 0)</h3>
                        <p>Upcoming Bookings (7 days)</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <a href="/bookingreports/bookingsummary?daterange=7days&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6" id="recurringBookingCard" style="display: @(ViewBag.RestaurantSettings != null && ViewBag.RestaurantSettings.EnableRecurringBooking == true ? "block" : "none");">
                <div class="small-box bg-gradient-indigo">
                    <div class="inner">
                        <h3 id="activeRecurringBookings">@(ViewBag.BookingStats?.ActiveRecurringBookings ?? 0)</h3>
                        <p>Recurring Bookings</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-redo-alt"></i>
                    </div>
                    <a href="/recurringbooking/index?returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gradient-maroon">
                    <div class="inner">
                        <h3>
                            @if (Request.Cookies["BusinessSetting"] != null && Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                            {
                                @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]<span id="todayRevenue">@(ViewBag.RevenueStats != null ? String.Format("{0:0.##}", ViewBag.RevenueStats.TodayRevenue ?? 0) : "0")</span>
                            }
                            else
                            {
                                <span id="todayRevenue">@(ViewBag.RevenueStats != null ? String.Format("{0:0.##}", ViewBag.RevenueStats.TodayRevenue ?? 0) : "0")</span>@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                            }
                        </h3>
                        <p>Today's Revenue</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <a href="/kotreports/tablewiserevenue?date=today&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
            
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gradient-olive">
                    <div class="inner">
                        <h3 id="occupiedTables">@(ViewBag.TableStats?.OccupiedTables ?? 0)</h3>
                        <p>Occupied Tables</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <a href="/restauranttable/index?filter=occupied&returnUrl=/restaurantdashboard/index" class="small-box-footer">More Info <i class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
        </div>

        <!-- Quick Actions Section (Menu Cards based on settings) -->
        <div class="row mt-3">
            <div class="col-12">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-th"></i> Quick Actions</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Table Booking Card -->
                            <div class="col-md-3 col-sm-6" id="tableBookingCard" style="display: @(ViewBag.RestaurantSettings != null && ViewBag.RestaurantSettings.EnableTableBooking == true ? "block" : "none");">
                                <div class="info-box">
                                    <span class="info-box-icon bg-info elevation-1"><i class="fas fa-calendar-check"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Table Booking</span>
                                        <span class="info-box-number">Manage Bookings</span>
                                        <a href="/tablebooking/index" class="btn btn-sm btn-info mt-2">Open</a>
                                    </div>
                                </div>
                            </div>

                            <!-- KOT Card -->
                            <div class="col-md-3 col-sm-6" id="kotCard" style="display: @(ViewBag.RestaurantSettings != null && ViewBag.RestaurantSettings.AutoPrintKot == true ? "block" : "none");">
                                <div class="info-box">
                                    <span class="info-box-icon bg-warning elevation-1"><i class="fas fa-receipt"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">KOT</span>
                                        <span class="info-box-number">Kitchen Orders</span>
                                        <a href="/kot/index" class="btn btn-sm btn-warning mt-2">Open</a>
                                    </div>
                                </div>
                            </div>

                            <!-- Kitchen Display Card -->
                            <div class="col-md-3 col-sm-6" id="kitchenDisplayCard" style="display: @(ViewBag.RestaurantSettings != null && ViewBag.RestaurantSettings.EnableKitchenDisplay == true ? "block" : "none");">
                                <div class="info-box">
                                    <span class="info-box-icon bg-danger elevation-1"><i class="fas fa-tv"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Kitchen Display</span>
                                        <span class="info-box-number">KDS System</span>
                                        <a href="/kot/kitchendisplay" class="btn btn-sm btn-danger mt-2">Open</a>
                                    </div>
                                </div>
                            </div>

                            <!-- Recurring Booking Card -->
                            <div class="col-md-3 col-sm-6" id="recurringBookingCardAction" style="display: @(ViewBag.RestaurantSettings != null && ViewBag.RestaurantSettings.EnableRecurringBooking == true ? "block" : "none");">
                                <div class="info-box">
                                    <span class="info-box-icon bg-success elevation-1"><i class="fas fa-redo-alt"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Recurring Booking</span>
                                        <span class="info-box-number">Repeat Bookings</span>
                                        <a href="/recurringbooking/index" class="btn btn-sm btn-success mt-2">Open</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    }
</div>

<style>
    .bg-orange {
        background-color: #fd7e14 !important;
    }
    .bg-gradient-green {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    }
    .bg-gradient-cyan {
        background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%) !important;
    }
    .bg-gradient-purple {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%) !important;
    }
    .bg-gradient-teal {
        background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%) !important;
    }
    .bg-gradient-indigo {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    }
    .bg-gradient-maroon {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;
    }
    .bg-gradient-olive {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important;
    }
</style>

