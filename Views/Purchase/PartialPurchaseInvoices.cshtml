@{
    var count = 1;
    <div class="row mt-1">
        <div class="col-sm-12 table-responsive">
            <table id="tblData" class="table table-bordered table-striped">

                <thead>
                    <tr role="row">
                        <th>Sln</th>
                        <th>Date</th>
                        <th>Purchase Bill#</th>
                        <th>Supplier Name</th>
                        <th>Supplier Mobile No</th>
                        <th> Status</th>
                        <th>Total Quantity</th>
                        <th>Total Amount</th>
                        <th>Paid Amount</th>
                        <th>Due Amount</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in ViewBag.Purchases)
                    {
                        <tr>

                            <td>@(count)</td>
                            <td>@item.PurchaseDate.ToString(Request.Cookies["BusinessSetting"].Value.Split('&')[0].Split('=')[1] + " " + Request.Cookies["BusinessSetting"].Value.Split('&')[1].Split('=')[1])</td>
                            <td>
                                @item.ReferenceNo
                                @if (item.IsPurchaseReturn)
                                {
                                    <i tabindex="0" class="fa fa-info-circle text-danger hover-q no-print" role="button" data-toggle="popover" data-trigger="focus" title="" data-content="Some quantities are returned from this purchase"></i>
                                }
                            </td>
                            <td>@item.SupplierName</td>
                            <td>@item.SupplierMobileNo</td>
                            <td>
                                @if (item.Status == "Draft")
                                {
                                    <span class='p-1 bg-info' style='cursor:pointer'>  @item.Status</span>
                                }
                                else if (item.Status == "Due")
                                {
                                    <span class='p-1 bg-warning' style='cursor:pointer'>  @item.Status</span>
                                }
                                else if (item.Status == "Partially Paid")
                                {
                                    <span class='p-1 bg-success' style='cursor:pointer'>  @item.Status</span>
                                }
                                else if (item.Status == "Overdue")
                                {
                                    <span class='p-1 bg-danger' style='cursor:pointer'>  @item.Status</span>
                                }
                                else
                                {
                                    <span class='p-1 bg-blue' style='cursor:pointer'>  @item.Status</span>
                                }
                            </td>
                            <td>
                                @(String.Format("{0:0.##}", item.PaidQuantity))
                                @if (item.FreeQuantity != 0)
                                {
                                    <span> + @(String.Format("{0:0.##}", item.FreeQuantity))</span>
                                }
                            </td>
                            <td>
                                @{
                                    if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                                    {
                                        @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@(String.Format("{0:0.##}", item.GrandTotal))
                                    }
                                    else
                                    {
                                        @(String.Format("{0:0.##}", item.GrandTotal))@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                                    }
                                }
                            </td>
                            <td>
                                @{
                                    if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                                    {
                                        @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@(String.Format("{0:0.##}", item.Paid))
                                    }
                                    else
                                    {
                                        @(String.Format("{0:0.##}", item.Paid))@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                                    }
                                }
                            </td>
                            <td>
                                @{
                                    if (Request.Cookies["BusinessSetting"].Value.Split('&')[2].Split('=')[1] == "1")
                                    {
                                        @Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]@(String.Format("{0:0.##}", item.Due))
                                    }
                                    else
                                    {
                                        @(String.Format("{0:0.##}", item.Due))@Request.Cookies["data"].Value.Split('&')[5].Split('=')[1]
                                    }
                                }
                            </td>
                        </tr>
                        count++;
                    }
                </tbody>

            </table>
        </div>
    </div>
}
