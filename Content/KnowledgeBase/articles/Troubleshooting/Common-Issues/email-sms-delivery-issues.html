<h2>Email/SMS Delivery Issues</h2>
<p>This guide helps you troubleshoot problems with email and SMS delivery in EquiBillBook, including notification delivery, invoice emails, and SMS alerts.</p>

<h3>Common Email Delivery Problems</h3>

<h4>1. Emails Not Being Sent</h4>
<p>If emails aren't being sent from EquiBillBook:</p>
<ul>
    <li><strong>Check Email Settings:</strong> Go to Settings → Notification Settings → Email Settings and verify SMTP configuration</li>
    <li><strong>Verify SMTP Credentials:</strong> Ensure email address and password are correct</li>
    <li><strong>Test SMTP Connection:</strong> Use the "Test Email" feature to verify SMTP connectivity</li>
    <li><strong>Check Email Limits:</strong> Verify you haven't exceeded daily email sending limits</li>
    <li><strong>Review Email Logs:</strong> Check email sending logs for error messages</li>
</ul>

<h4>2. Emails Going to Spam Folder</h4>
<p>If emails are being marked as spam:</p>
<ul>
    <li><strong>SPF Records:</strong> Configure SPF (Sender Policy Framework) records for your domain</li>
    <li><strong>DKIM Setup:</strong> Set up DKIM (DomainKeys Identified Mail) authentication</li>
    <li><strong>DMARC Configuration:</strong> Configure DMARC policy for email authentication</li>
    <li><strong>Sender Reputation:</strong> Ensure sender email address has good reputation</li>
    <li><strong>Email Content:</strong> Avoid spam trigger words and excessive links</li>
    <li><strong>Ask Recipients:</strong> Request recipients to mark emails as "Not Spam" and add to contacts</li>
</ul>

<h4>3. SMTP Authentication Errors</h4>
<p>If you see SMTP authentication errors:</p>
<ul>
    <li><strong>Verify Credentials:</strong> Double-check email address and password</li>
    <li><strong>Check Two-Factor Authentication:</strong> If using Gmail/Office 365, you may need an app-specific password</li>
    <li><strong>Enable Less Secure Apps:</strong> For some email providers, enable "Less Secure App Access" (not recommended for production)</li>
    <li><strong>Use OAuth:</strong> Consider using OAuth authentication instead of password</li>
    <li><strong>Check Account Status:</strong> Verify email account is active and not locked</li>
</ul>

<h4>4. SMTP Connection Timeout</h4>
<p>If SMTP connection times out:</p>
<ul>
    <li><strong>Verify SMTP Server:</strong> Check SMTP server address and port are correct</li>
    <li><strong>Check Port Settings:</strong> Common ports: 587 (TLS), 465 (SSL), 25 (unencrypted)</li>
    <li><strong>Firewall Settings:</strong> Ensure firewall allows SMTP connections</li>
    <li><strong>Network Connectivity:</strong> Verify internet connection is stable</li>
    <li><strong>SSL/TLS Settings:</strong> Enable SSL or TLS encryption as required</li>
</ul>

<h4>5. Email Templates Not Rendering</h4>
<p>If email templates aren't displaying correctly:</p>
<ul>
    <li><strong>Check Template Format:</strong> Verify email template HTML is valid</li>
    <li><strong>Test Template:</strong> Use preview feature to test template rendering</li>
    <li><strong>Browser Compatibility:</strong> Test email in different email clients</li>
    <li><strong>Image Links:</strong> Ensure images use absolute URLs (not relative paths)</li>
    <li><strong>CSS Inlining:</strong> Use inline CSS for better email client compatibility</li>
</ul>

<h3>Common SMS Delivery Problems</h3>

<h4>1. SMS Not Being Sent</h4>
<p>If SMS messages aren't being sent:</p>
<ul>
    <li><strong>Check SMS Settings:</strong> Go to Settings → Notification Settings → SMS Settings</li>
    <li><strong>Verify SMS Gateway:</strong> Ensure SMS gateway is properly configured</li>
    <li><strong>Check API Credentials:</strong> Verify SMS gateway API key and credentials</li>
    <li><strong>Test SMS Gateway:</strong> Use "Test SMS" feature to verify connectivity</li>
    <li><strong>Review SMS Balance:</strong> Check if you have sufficient SMS credits/balance</li>
    <li><strong>Check Phone Numbers:</strong> Verify phone numbers are in correct format (with country code)</li>
</ul>

<h4>2. SMS Gateway Connection Issues</h4>
<p>If SMS gateway isn't connecting:</p>
<ul>
    <li><strong>Verify API Endpoint:</strong> Check SMS gateway API URL is correct</li>
    <li><strong>Check API Key:</strong> Ensure API key is valid and not expired</li>
    <li><strong>Network Connectivity:</strong> Verify internet connection is stable</li>
    <li><strong>Gateway Status:</strong> Check if SMS gateway service is operational</li>
    <li><strong>Review Gateway Logs:</strong> Check SMS gateway dashboard for errors</li>
</ul>

<h4>3. SMS Delivery Failures</h4>
<p>If SMS delivery is failing:</p>
<ul>
    <li><strong>Invalid Phone Numbers:</strong> Verify phone numbers are valid and in correct format</li>
    <li><strong>Country Code:</strong> Ensure country code is included (e.g., +91 for India)</li>
    <li><strong>DND (Do Not Disturb):</strong> Check if numbers are registered on DND list</li>
    <li><strong>Carrier Issues:</strong> Some carriers may block certain types of messages</li>
    <li><strong>Message Length:</strong> Ensure message doesn't exceed character limits</li>
    <li><strong>Special Characters:</strong> Avoid special characters that may cause issues</li>
</ul>

<h4>4. SMS Credits/Balance Issues</h4>
<p>If you're running out of SMS credits:</p>
<ul>
    <li><strong>Check Balance:</strong> Review SMS balance in gateway dashboard</li>
    <li><strong>Recharge Account:</strong> Add credits to your SMS gateway account</li>
    <li><strong>Set Alerts:</strong> Configure low balance alerts</li>
    <li><strong>Review Usage:</strong> Check SMS usage reports to understand consumption</li>
    <li><strong>Optimize Messages:</strong> Reduce unnecessary SMS notifications</li>
</ul>

<h3>Email Provider Specific Issues</h3>

<h4>Gmail</h4>
<ul>
    <li><strong>App Password:</strong> Use app-specific password instead of regular password</li>
    <li><strong>2-Step Verification:</strong> Enable 2-step verification to generate app password</li>
    <li><strong>SMTP Settings:</strong> Use smtp.gmail.com, port 587 with TLS</li>
    <li><strong>Less Secure Apps:</strong> Enable "Allow less secure apps" (not recommended)</li>
</ul>

<h4>Office 365 / Outlook</h4>
<ul>
    <li><strong>SMTP Settings:</strong> Use smtp.office365.com, port 587 with STARTTLS</li>
    <li><strong>Modern Authentication:</strong> May require OAuth instead of password</li>
    <li><strong>App Password:</strong> Use app password if MFA is enabled</li>
</ul>

<h4>Custom SMTP Server</h4>
<ul>
    <li><strong>Server Address:</strong> Verify SMTP server hostname or IP</li>
    <li><strong>Port Configuration:</strong> Use correct port (587, 465, or 25)</li>
    <li><strong>Authentication:</strong> Ensure username and password are correct</li>
    <li><strong>Encryption:</strong> Enable SSL/TLS as required by server</li>
</ul>

<h3>SMS Gateway Provider Issues</h3>

<h4>Twilio</h4>
<ul>
    <li><strong>Account SID:</strong> Verify Account SID is correct</li>
    <li><strong>Auth Token:</strong> Check Auth Token is valid</li>
    <li><strong>Phone Number:</strong> Verify Twilio phone number is active</li>
    <li><strong>Balance:</strong> Check account balance in Twilio console</li>
</ul>

<h4>Other SMS Gateways</h4>
<ul>
    <li><strong>API Documentation:</strong> Review gateway-specific API documentation</li>
    <li><strong>API Version:</strong> Ensure using correct API version</li>
    <li><strong>Request Format:</strong> Verify request format matches gateway requirements</li>
    <li><strong>Response Handling:</strong> Check how gateway responses are handled</li>
</ul>

<h3>Notification Settings Configuration</h3>
<p>Verify these notification settings:</p>
<ul>
    <li><strong>Email Notifications:</strong> Settings → Notification Settings → Email Notifications</li>
    <li><strong>SMS Notifications:</strong> Settings → Notification Settings → SMS Notifications</li>
    <li><strong>Notification Triggers:</strong> Check which events trigger notifications</li>
    <li><strong>Recipient Lists:</strong> Verify recipient email addresses and phone numbers</li>
    <li><strong>Template Selection:</strong> Ensure correct templates are selected</li>
</ul>

<h3>Testing Email and SMS</h3>
<p>Before relying on notifications, test them:</p>
<ol>
    <li><strong>Test Email:</strong> Use "Send Test Email" feature in settings</li>
    <li><strong>Test SMS:</strong> Use "Send Test SMS" feature in settings</li>
    <li><strong>Check Delivery:</strong> Verify emails/SMS are received</li>
    <li><strong>Review Formatting:</strong> Check content and formatting are correct</li>
    <li><strong>Test Different Scenarios:</strong> Test various notification triggers</li>
</ol>

<h3>Best Practices</h3>
<ul>
    <li><strong>Monitor Delivery Rates:</strong> Regularly check email/SMS delivery success rates</li>
    <li><strong>Maintain Sender Reputation:</strong> Follow email best practices to maintain good reputation</li>
    <li><strong>Verify Recipients:</strong> Regularly verify recipient email addresses and phone numbers</li>
    <li><strong>Update Templates:</strong> Keep email and SMS templates updated and tested</li>
    <li><strong>Monitor Costs:</strong> Track SMS costs and optimize usage</li>
    <li><strong>Backup Communication:</strong> Have alternative communication methods for critical notifications</li>
</ul>

<h3>Still Having Issues?</h3>
<p>If email/SMS delivery problems persist:</p>
<ol>
    <li><strong>Check Service Status:</strong> Verify email/SMS service providers are operational</li>
    <li><strong>Review Error Logs:</strong> Check EquiBillBook logs for detailed error messages</li>
    <li><strong>Contact Email Provider:</strong> Reach out to your email service provider</li>
    <li><strong>Contact SMS Gateway:</strong> Contact your SMS gateway support</li>
    <li><strong>Contact EquiBillBook Support:</strong> Provide:
        <ul>
            <li>Email/SMS provider you're using</li>
            <li>Error messages from logs</li>
            <li>Configuration details (without sensitive credentials)</li>
            <li>Steps to reproduce the issue</li>
            <li>Test results</li>
        </ul>
    </li>
</ol>

<p>Most email and SMS delivery issues can be resolved by verifying configuration settings and ensuring proper authentication. If problems continue, contact support for assistance.</p>

