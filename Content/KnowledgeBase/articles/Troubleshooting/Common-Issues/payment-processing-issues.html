<h2>Payment Processing Issues</h2>
<p>This guide helps you troubleshoot common payment processing problems in EquiBillBook, including online payments, payment links, and payment recording issues.</p>

<h3>Common Payment Processing Problems</h3>

<h4>1. Payment Link Not Working</h4>
<p>If payment links aren't functioning properly:</p>
<ul>
    <li><strong>Check Link Expiry:</strong> Verify the payment link hasn't expired</li>
    <li><strong>Verify Link Format:</strong> Ensure the complete URL is copied correctly</li>
    <li><strong>Check Payment Gateway:</strong> Verify payment gateway is properly configured in settings</li>
    <li><strong>Test Link:</strong> Try opening the link in a different browser or incognito mode</li>
    <li><strong>Regenerate Link:</strong> Create a new payment link if the old one isn't working</li>
</ul>

<h4>2. Payment Gateway Not Responding</h4>
<p>If the payment gateway isn't responding:</p>
<ul>
    <li><strong>Check Gateway Status:</strong> Verify if the payment gateway service is operational</li>
    <li><strong>Verify API Credentials:</strong> Check if payment gateway API keys and credentials are correct</li>
    <li><strong>Check Network Connection:</strong> Ensure stable internet connection</li>
    <li><strong>Review Gateway Settings:</strong> Go to Settings → Online Payment Settings and verify configuration</li>
    <li><strong>Test Gateway:</strong> Try processing a test payment to verify gateway connectivity</li>
</ul>

<h4>3. Payment Failed or Declined</h4>
<p>If payments are being declined:</p>
<ul>
    <li><strong>Check Card Details:</strong> Verify card number, expiry date, and CVV are correct</li>
    <li><strong>Verify Card Balance:</strong> Ensure sufficient funds are available</li>
    <li><strong>Check Card Status:</strong> Verify the card is active and not blocked</li>
    <li><strong>Bank Restrictions:</strong> Contact bank to check if online transactions are enabled</li>
    <li><strong>Transaction Limits:</strong> Verify transaction amount is within card/bank limits</li>
    <li><strong>Try Different Payment Method:</strong> Test with a different card or payment method</li>
</ul>

<h4>4. Payment Not Reflecting in Account</h4>
<p>If payment is processed but not showing in EquiBillBook:</p>
<ul>
    <li><strong>Check Payment Status:</strong> Verify payment status in payment gateway dashboard</li>
    <li><strong>Refresh Page:</strong> Refresh the payments page or dashboard</li>
    <li><strong>Check Payment Records:</strong> Look in Customer Payments or Payment History</li>
    <li><strong>Verify Payment Link:</strong> Ensure payment was made against the correct invoice/link</li>
    <li><strong>Check Reconciliation:</strong> Review payment reconciliation settings</li>
    <li><strong>Manual Entry:</strong> If needed, manually record the payment if gateway confirmed it</li>
</ul>

<h4>5. Duplicate Payment Processing</h4>
<p>If payments are being processed twice:</p>
<ul>
    <li><strong>Check Payment History:</strong> Review payment records for duplicates</li>
    <li><strong>Verify Gateway Logs:</strong> Check payment gateway transaction logs</li>
    <li><strong>Prevent Double Submission:</strong> Don't click payment button multiple times</li>
    <li><strong>Check Auto-Reconciliation:</strong> Review auto-reconciliation settings</li>
    <li><strong>Refund Duplicate:</strong> Process refund for duplicate payment if applicable</li>
</ul>

<h4>6. Payment Gateway Configuration Errors</h4>
<p>If you see configuration errors:</p>
<ul>
    <li><strong>Verify API Keys:</strong> Check that API keys and secrets are correctly entered</li>
    <li><strong>Check Merchant ID:</strong> Verify merchant ID is correct</li>
    <li><strong>Test Mode vs Live Mode:</strong> Ensure correct mode (test/live) is selected</li>
    <li><strong>Webhook Configuration:</strong> Verify webhook URLs are properly configured</li>
    <li><strong>SSL Certificate:</strong> Ensure SSL certificate is valid for payment gateway</li>
    <li><strong>Gateway Documentation:</strong> Review payment gateway integration documentation</li>
</ul>

<h3>Payment Recording Issues</h3>

<h4>1. Unable to Record Customer Payment</h4>
<p>If you can't record a payment:</p>
<ul>
    <li><strong>Check Invoice Status:</strong> Verify invoice exists and is not cancelled</li>
    <li><strong>Verify Amount:</strong> Ensure payment amount doesn't exceed invoice amount</li>
    <li><strong>Check Permissions:</strong> Verify you have permission to record payments</li>
    <li><strong>Review Payment Date:</strong> Ensure payment date is within valid date range</li>
    <li><strong>Check Payment Account:</strong> Verify payment account is active</li>
</ul>

<h4>2. Payment Not Matching Invoice</h4>
<p>If payment doesn't match invoice:</p>
<ul>
    <li><strong>Verify Invoice Number:</strong> Check correct invoice is selected</li>
    <li><strong>Check Partial Payments:</strong> Review if partial payment settings are correct</li>
    <li><strong>Review Payment Allocation:</strong> Verify payment is allocated to correct invoice</li>
    <li><strong>Check Outstanding Balance:</strong> Verify invoice outstanding amount</li>
</ul>

<h4>3. Payment Reconciliation Issues</h4>
<p>If payments aren't reconciling properly:</p>
<ul>
    <li><strong>Check Payment Dates:</strong> Verify payment dates match transaction dates</li>
    <li><strong>Review Bank Statements:</strong> Compare with actual bank statements</li>
    <li><strong>Verify Payment Methods:</strong> Ensure payment methods are correctly recorded</li>
    <li><strong>Check Auto-Reconciliation:</strong> Review auto-reconciliation rules and settings</li>
    <li><strong>Manual Reconciliation:</strong> Perform manual reconciliation if needed</li>
</ul>

<h3>Payment Method Specific Issues</h3>

<h4>Credit/Debit Card Payments</h4>
<ul>
    <li><strong>Card Not Supported:</strong> Verify card type is supported by payment gateway</li>
    <li><strong>3D Secure Issues:</strong> Complete 3D Secure authentication if required</li>
    <li><strong>International Cards:</strong> Check if international cards are enabled</li>
    <li><strong>Card Expiry:</strong> Verify card hasn't expired</li>
</ul>

<h4>UPI Payments</h4>
<ul>
    <li><strong>UPI ID Verification:</strong> Verify UPI ID is correct and active</li>
    <li><strong>UPI App:</strong> Ensure customer has UPI app installed and configured</li>
    <li><strong>Transaction Limits:</strong> Check UPI transaction limits</li>
    <li><strong>Network Issues:</strong> Verify stable internet connection for UPI</li>
</ul>

<h4>Net Banking</h4>
<ul>
    <li><strong>Bank Selection:</strong> Verify selected bank is supported</li>
    <li><strong>Bank Website:</strong> Ensure bank's net banking is accessible</li>
    <li><strong>Transaction Timeout:</strong> Complete transaction within time limit</li>
    <li><strong>Bank Maintenance:</strong> Check if bank is under maintenance</li>
</ul>

<h4>Digital Wallets</h4>
<ul>
    <li><strong>Wallet Balance:</strong> Verify sufficient balance in wallet</li>
    <li><strong>Wallet App:</strong> Ensure wallet app is updated and working</li>
    <li><strong>Wallet Limits:</strong> Check transaction limits for wallet</li>
    <li><strong>Wallet Support:</strong> Verify wallet is supported by payment gateway</li>
</ul>

<h3>Payment Settings Configuration</h3>
<p>Verify these settings are correctly configured:</p>
<ul>
    <li><strong>Payment Gateway:</strong> Settings → Online Payment Settings → Payment Gateway</li>
    <li><strong>API Credentials:</strong> Verify all API keys, secrets, and merchant IDs</li>
    <li><strong>Payment Methods:</strong> Ensure required payment methods are enabled</li>
    <li><strong>Currency Settings:</strong> Verify currency is supported by gateway</li>
    <li><strong>Webhook URLs:</strong> Check webhook endpoints are correctly configured</li>
    <li><strong>Return URLs:</strong> Verify return/success URLs are set correctly</li>
</ul>

<h3>Testing Payment Processing</h3>
<p>Before going live, test payment processing:</p>
<ol>
    <li><strong>Use Test Mode:</strong> Enable test mode in payment gateway settings</li>
    <li><strong>Test Transactions:</strong> Process test payments with test cards</li>
    <li><strong>Verify Webhooks:</strong> Test webhook callbacks are working</li>
    <li><strong>Check Notifications:</strong> Verify payment notifications are sent</li>
    <li><strong>Review Logs:</strong> Check payment processing logs for errors</li>
</ol>

<h3>Payment Security Issues</h3>
<ul>
    <li><strong>SSL Certificate:</strong> Ensure valid SSL certificate is installed</li>
    <li><strong>PCI Compliance:</strong> Verify PCI DSS compliance requirements</li>
    <li><strong>Data Encryption:</strong> Check payment data is encrypted in transit</li>
    <li><strong>Secure Storage:</strong> Verify payment credentials are securely stored</li>
</ul>

<h3>Still Having Issues?</h3>
<p>If payment processing problems persist:</p>
<ol>
    <li><strong>Check Payment Gateway Status:</strong> Verify gateway service is operational</li>
    <li><strong>Review Error Logs:</strong> Check EquiBillBook error logs for details</li>
    <li><strong>Contact Payment Gateway Support:</strong> Reach out to your payment gateway provider</li>
    <li><strong>Contact EquiBillBook Support:</strong> Provide:
        <ul>
            <li>Payment gateway you're using</li>
            <li>Error messages received</li>
            <li>Transaction IDs (if available)</li>
            <li>Steps to reproduce the issue</li>
            <li>Screenshots of errors</li>
        </ul>
    </li>
</ol>

<p>Most payment processing issues can be resolved by verifying configuration settings and ensuring payment gateway connectivity. If problems continue, contact support for assistance.</p>

